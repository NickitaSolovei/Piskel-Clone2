!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=0)}([function(e,t,a){a(2),e.exports=a(1)},function(e,t,a){},function(e,t,a){"use strict";a.r(t);const r={pen:document.querySelector(".pen"),mirrorPen:document.querySelector(".vertical-mirror-pen"),paintBucket:document.querySelector(".paint-bucket"),eraser:document.querySelector(".eraser"),paintAllPixels:document.querySelector(".paint-All-pixels"),stroke:document.querySelector(".stroke"),move:document.querySelector(".move"),rectangle:document.querySelector(".rectangle"),circle:document.querySelector(".circle"),lighten:document.querySelector(".lighten"),dithering:document.querySelector(".dithering"),colorPicker:document.querySelector(".color-picker")},n=[];function i(e,t){if(!e.classList.contains("selectedTool")){document.querySelector(".selectedTool").classList.remove("selectedTool"),e.classList.add("selectedTool"),t.selectedTool=e}}function o(e,t){const a=Math.floor((t.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),r=Math.floor((t.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame));if(e.context.fillRect(a*(e.realWidthCanvas/e.widthFrame),r*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),e.prevPoint.x){const t=a-e.prevPoint.x,n=r-e.prevPoint.y;let i,o;if(Math.abs(t)>Math.abs(n)&&Math.abs(t)>1){o=n;for(let a=(i=t)/Math.abs(i);Math.abs(a)<Math.abs(i);a+=i/Math.abs(i)){const t=Math.round(o*(Math.abs(a)/Math.abs(i)));e.context.fillRect((e.prevPoint.x+a)*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+t)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}else if(Math.abs(n)>1){o=t;for(let t=(i=n)/Math.abs(i);Math.abs(t)<Math.abs(i);t+=i/Math.abs(i)){const a=Math.round(o*(Math.abs(t)/Math.abs(i)));e.context.fillRect((e.prevPoint.x+a)*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+t)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}}e.prevPoint.x=a,e.prevPoint.y=r}function l(e){e.prevPoint.x=null,e.prevPoint.y=null}function s(e){document.querySelector(".selected").src=e.toDataURL()}function d(e,t,a,n){const i=document.querySelector("body");e.selectedTool!==r.pen&&e.selectedTool!==r.eraser&&e.selectedTool!==r.mirrorPen&&e.selectedTool!==r.dithering||(e.canvasMain.removeEventListener("mousemove",t),e.canvasMain.removeEventListener("mouseout",a),i.removeEventListener("mouseup",n),e.prevPoint.x=null,e.prevPoint.y=null),e.selectedTool!==r.stroke&&e.selectedTool!==r.move&&e.selectedTool!==r.rectangle&&e.selectedTool!==r.circle&&e.selectedTool!==r.lighten||(e.canvasMain.removeEventListener("mousemove",t),e.canvasMain.removeEventListener("mouseout",a),i.removeEventListener("mouseup",n)),s(e.canvasMain)}function c(e,t){const a=e.canvasMain.getContext("2d"),r=Math.floor((t.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),n=Math.floor((t.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame));if(a.fillRect(r*(e.realWidthCanvas/e.widthFrame),n*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),t.ctrlKey?a.fillRect(r*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-n)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame):t.shiftKey?(a.fillRect((e.widthFrame-1-r)*(e.realWidthCanvas/e.widthFrame),n*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),a.fillRect(r*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-n)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),a.fillRect((e.widthFrame-1-r)*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-n)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)):a.fillRect((e.widthFrame-1-r)*(e.realWidthCanvas/e.widthFrame),n*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),e.prevPoint.x){const i=r-e.prevPoint.x,o=n-e.prevPoint.y;let l,s;if(Math.abs(i)>Math.abs(o)&&Math.abs(i)>1){s=o;for(let r=(l=i)/Math.abs(l);Math.abs(r)<Math.abs(l);r+=l/Math.abs(l)){const n=Math.round(s*(Math.abs(r)/Math.abs(l)));a.fillRect((e.prevPoint.x+r)*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+n)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),t.ctrlKey?a.fillRect((e.prevPoint.x+r)*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-(e.prevPoint.y+n))*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame):t.shiftKey?(a.fillRect((e.widthFrame-1-(e.prevPoint.x+r))*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+n)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),a.fillRect((e.prevPoint.x+r)*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-(e.prevPoint.y+n))*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),a.fillRect((e.widthFrame-1-(e.prevPoint.x+r))*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-(e.prevPoint.y+n))*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)):a.fillRect((e.widthFrame-1-(e.prevPoint.x+r))*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+n)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}else if(Math.abs(o)>1){s=i;for(let r=(l=o)/Math.abs(l);Math.abs(r)<Math.abs(l);r+=l/Math.abs(l)){const n=Math.round(s*(Math.abs(r)/Math.abs(l)));a.fillRect((e.prevPoint.x+n)*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+r)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),t.ctrlKey?a.fillRect((e.prevPoint.x+n)*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-(e.prevPoint.y+r))*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame):t.shiftKey?(a.fillRect((e.widthFrame-1-(e.prevPoint.x+n))*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+r)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),a.fillRect((e.prevPoint.x+n)*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-(e.prevPoint.y+r))*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),a.fillRect((e.widthFrame-1-(e.prevPoint.x+n))*(e.realWidthCanvas/e.widthFrame),(e.widthFrame-1-(e.prevPoint.y+r))*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)):a.fillRect((e.widthFrame-1-(e.prevPoint.x+n))*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+r)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}}a.fillRect(r*(e.realWidthCanvas/e.widthFrame),n*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),e.prevPoint.x=r,e.prevPoint.y=n}function h(e,t,a,r){const n=r.canvasMain.getContext("2d").getImageData(e*(r.realWidthCanvas/r.widthFrame),t*(r.realWidthCanvas/r.widthFrame),1,1).data,i=n[0],o=n[1],l=n[2];return i===a[0]&&o===a[1]&&l===a[2]}function m(e,t,a){a.context.fillRect(e*(a.realWidthCanvas/a.widthFrame),t*(a.realWidthCanvas/a.widthFrame),a.realWidthCanvas/a.widthFrame,a.realWidthCanvas/a.widthFrame)}function v(e,t){const a=Math.floor((event.pageX-t.coords.left)/(t.realWidthCanvas/t.widthFrame)),r=Math.floor((event.pageY-t.coords.top)/(t.realWidthCanvas/t.widthFrame));e.x=a,e.y=r}function u(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}function p(e,t,a){return`#${u(e)}${u(t)}${u(a)}`}function C(e){const t=Math.floor((event.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),a=Math.floor((event.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame)),r=t-e.pointClick.x,n=a-e.pointClick.y;if(Math.abs(r)>0&&e.pointClick.xPrev!==r||Math.abs(n)>0&&e.pointClick.yPrev!==n){e.pointClick.xPrev=r,e.pointClick.yPrev=n;const t=e.canvasMain.getContext("2d");t.clearRect(0,0,e.canvasMain.width,e.canvasMain.height);for(let a=0;a<e.widthFrame;a++)for(let i=0;i<e.widthFrame;i++)t.fillStyle=e.arrColors[a][i],e.context.fillRect((r+i)*(e.realWidthCanvas/e.widthFrame),(n+a)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}function f(e,t){const a=Math.floor((t.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),r=Math.floor((t.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame)),n=a-e.pointClick.x,i=r-e.pointClick.y;if(Math.abs(n)>2&&e.pointClick.xPrev!==n||Math.abs(i)>2&&e.pointClick.yPrev!==i){e.pointClick.xPrev=n,e.pointClick.yPrev=i;const t=e.canvasMain.getContext("2d");let o,l,s,d;t.clearRect(0,0,e.canvasMain.width,e.canvasMain.height),t.drawImage(e.MainCanvasCopyImg,0,0,e.realWidthCanvas,e.realWidthCanvas),a>e.pointClick.x?(o=e.pointClick.x,l=a):(o=a,l=e.pointClick.x),r>e.pointClick.y?(s=e.pointClick.y,d=r):(s=r,d=e.pointClick.y);const c=document.createElement("canvas");c.width=e.widthFrame,c.height=e.widthFrame,c.style.width=`${e.widthFrame}px`,c.style.height=`${e.widthFrame}px`;const h=c.getContext("2d");h.lineWidth=1,function(e,t,a){e.beginPath(),e.save(),e.translate(t[0],t[1]),e.scale(1,a[1]/a[0]),e.arc(0,0,a[0],0,2*Math.PI),e.restore(),e.strokeStyle="#ff0000",e.stroke(),e.closePath()}(h,[o+(l-o)/2,s+(d-s)/2],[(l-o)/2,(d-s)/2]),e.arrColors=function(e,t){const a=[];for(let r=0;r<t.widthFrame;r++){a[r]=[];for(let n=0;n<t.widthFrame;n++){const t=e.getContext("2d").getImageData(n,r,1,1).data;a[r][n]=p(...t)}}return a}(c,e);for(let t=0;t<e.widthFrame;t++)for(let a=0;a<e.widthFrame;a++)"#ff0000"===e.arrColors[t][a]&&e.context.fillRect(a*(e.realWidthCanvas/e.widthFrame),t*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}function y(e,t){const a=e.canvasMain.getContext("2d"),r=Math.floor((t.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),n=Math.floor((t.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame)),i=(r+n)%2;if(a.fillStyle=i?e.primaryColor:e.secondaryColor,a.fillRect(r*(e.realWidthCanvas/e.widthFrame),n*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),e.prevPoint.x){const t=r-e.prevPoint.x,i=n-e.prevPoint.y;let o,l;if(Math.abs(t)>Math.abs(i)&&Math.abs(t)>1){l=i;for(let r=(o=t)/Math.abs(o);Math.abs(r)<Math.abs(o);r+=o/Math.abs(o)){const t=Math.round(l*(Math.abs(r)/Math.abs(o))),n=(e.prevPoint.x+r+e.prevPoint.y+t)%2;a.fillStyle=n?e.primaryColor:e.secondaryColor,a.fillRect((e.prevPoint.x+r)*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+t)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}else if(Math.abs(i)>1){l=t;for(let t=(o=i)/Math.abs(o);Math.abs(t)<Math.abs(o);t+=o/Math.abs(o)){const r=Math.round(l*(Math.abs(t)/Math.abs(o))),n=(e.prevPoint.x+r+e.prevPoint.y+t)%2;a.fillStyle=n?e.primaryColor:e.secondaryColor,a.fillRect((e.prevPoint.x+r)*(e.realWidthCanvas/e.widthFrame),(e.prevPoint.y+t)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}}e.prevPoint.x=r,e.prevPoint.y=n}function w(e,t){const a=e.canvasMain.getContext("2d"),r=Math.floor((t.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),n=Math.floor((t.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame)),i=a.getImageData(t.pageX-e.coords.left,t.pageY-e.coords.top,1,1).data,o=Array.from(i);if(o.pop(),t.ctrlKey){const e=Math.max(...o);if(0===e)return;const t=e,r=p(...o.map(e=>{const a=e-Math.ceil(10*e/t);return a<0?0:a}));a.fillStyle=r}else{const e=Math.min(...o);if(255===e)return;const t=255-e,r=p(...o.map(e=>{const a=e+Math.ceil(10*(255-e)/t);return a>255?255:a}));a.fillStyle=r}a.fillRect(r*(e.realWidthCanvas/e.widthFrame),n*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}function F(e,t){const a=e;return()=>{if(!a.classList.contains("selected")){document.querySelector(".selected").classList.remove("selected"),a.classList.add("selected"),function(e){const t=document.getElementById("canvasMain"),a=t.getContext("2d");a.clearRect(0,0,t.width,t.height);const r=document.querySelector(".selected");a.drawImage(r,0,0,e,e)}(t)}}}function g(e){const t=document.getElementById("canvas-animation");if(t.getContext){const a=t.getContext("2d");a.clearRect(0,0,t.width,t.height);const r=e.querySelector(".img-frame-left");a.drawImage(r,0,0,160,160)}}n[80]=r.pen,n[86]=r.mirrorPen,n[66]=r.paintBucket,n[65]=r.paintAllPixels,n[69]=r.eraser,n[76]=r.stroke,n[82]=r.rectangle,n[67]=r.circle,n[77]=r.move,n[85]=r.lighten,n[84]=r.dithering,n[79]=r.colorPicker;let W=!1,M=!1,b=null;const S=[];let x=null,k=null,L=null,P=null;function E(e){let t=0,a=0;for(;e.offsetParent;)t+=e.offsetLeft+(e.currentStyle?parseInt(e.currentStyle.borderLeftWidth,10).NaN0():0),a+=e.offsetTop+(e.currentStyle?parseInt(e.currentStyle.borderTopWidth,10).NaN0():0),e=e.offsetParent;return{x:t+=e.offsetLeft+(e.currentStyle?parseInt(e.currentStyle.borderLeftWidth,10).NaN0():0),y:a+=e.offsetTop+(e.currentStyle?parseInt(e.currentStyle.borderTopWidth,10).NaN0():0)}}function I(e){let t;e=e||window.event;const a=document.querySelector(".drag-helper");let r=null;const n=e.target||e.srcElement,i=function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}}(e);let o,l,s,d,c;k&&n!==k&&(o=k.getAttribute("origClass"))&&(k.className=o);const h=n.getAttribute("DragObj");if(null!==h&&W&&!M){for(L=(x=n).parentNode,P=x.nextSibling,d=0;d<a.childNodes.length;d+=1)a.removeChild(a.childNodes[d]);for(a.appendChild(x.cloneNode(!0)),a.style.display="block",a.classList.add("drag-box-dragging"),a.firstChild.removeAttribute("DragObj"),l=S[h],x.setAttribute("startWidth",parseInt(x.offsetWidth,10)),x.setAttribute("startHeight",parseInt(x.offsetHeight,10)),x.style.display="none",d=0;d<l.length;d+=1)for(t=l[d],s=E(l[d]),t.setAttribute("startWidth",parseInt(t.offsetWidth,10)),t.setAttribute("startHeight",parseInt(t.offsetHeight,10)),t.setAttribute("startLeft",s.x),t.setAttribute("startTop",s.y),c=0;c<l[d].childNodes.length;c+=1)"#text"!==(t=l[d].childNodes[c]).nodeName&&l[d].childNodes[c]!==x&&(s=E(l[d].childNodes[c]),t.setAttribute("startWidth",parseInt(t.offsetWidth,10)),t.setAttribute("startHeight",parseInt(t.offsetHeight,10)),t.setAttribute("startLeft",s.x),t.setAttribute("startTop",s.y))}if(x){a.style.top=`${i.y}px`,a.style.left=`${i.x}px`,l=S[x.getAttribute("DragObj")];const e=i.x+parseInt(x.getAttribute("startWidth"),10)/2,n=i.y+parseInt(x.getAttribute("startHeight"),10)/2;for(d=0;d<l.length;d+=1)r=l[d];let o=null;for(d=r.childNodes.length-1;d>=0;d-=1)"#text"!==(t=r.childNodes[d]).nodeName&&x!==r.childNodes[d]&&parseInt(t.getAttribute("startLeft"),10)+parseInt(t.getAttribute("startWidth"),10)>e&&parseInt(t.getAttribute("startTop"),10)+parseInt(t.getAttribute("startHeight"),10)>n&&(o=r.childNodes[d]);o?o!==x.nextSibling&&r.insertBefore(x,o):(x.nextSibling||x.parentNode!==r)&&r.appendChild(x),""!==x.style.display&&(x.style.display="",x.style.visibility="hidden")}if(M=W,k=n,b&&(b.style.position="absolute",b.style.top=i.y,b.style.left=i.x),M=W,x||b)return!1}function q(e,t){!function(e){let t=0;const a=S.length;for(S[a]=[],e.setAttribute("DropObj",a),S[a].push(e),t=0;t<e.childNodes.length;t+=1)"#text"!==e.childNodes[t].nodeName&&e.childNodes[t].setAttribute("DragObj",a)}(document.querySelector(e));const a=document.createElement("div");a.style.cssText="position: absolute; display: none;",a.classList.add("drag-helper"),document.body.appendChild(a),document.addEventListener("mousemove",()=>{I()}),document.addEventListener("mousedown",()=>{!function(e){const t=(e=e||window.event).target||e.srcElement;if(W=!0,t.onmousedown||t.getAttribute("DragObj"));}()}),document.addEventListener("mouseup",()=>{!function(){const e=document.querySelector(".drag-helper");x&&(e.style.display="none","none"===x.style.display&&(P?L.insertBefore(x,P):L.appendChild(x)),x.style.display="",x.style.visibility="visible"),x=null,b=null,W=!1}(),t.length=0;const e=document.querySelector(".imgs-block").querySelectorAll(".img-wrap");for(let a=0;a<e.length;a++)t[a]=e[a]})}function R(e,t){let a;if(e.canvasMain.getContext("2d").clearRect(0,0,e.canvasMain.width,e.canvasMain.height),void 0===t)(a=document.createElement("img")).className="img-frame-left";else{const e=t.querySelector(".img-frame-left").cloneNode(!0);(a=e).classList.remove("selected")}const r=document.querySelector(".frames-imgs"),n=document.createElement("div");n.className="img-wrap",n.innerHTML="move";const i=document.createElement("button");i.innerHTML="del",i.className="delete-frame",i.addEventListener("click",()=>{if(1===e.arrFrames.length)return void alert("can not delete last frame");if(a.classList.contains("selected")){F(document.querySelector(".img-frame-left"),e.realWidthCanvas)()}n.parentNode.removeChild(n);const t=e.arrFrames.indexOf(n);e.arrFrames.splice(t,1)});const o=document.createElement("button");o.innerHTML="copy",o.className="copy-frame",o.addEventListener("click",()=>{R(e,n)});const l=document.createElement("div");l.className="but-img-wrap",l.appendChild(i),l.appendChild(o),n.appendChild(a),n.appendChild(l),r.appendChild(n),F(a,e.realWidthCanvas)(),a.addEventListener("click",F(a,e.realWidthCanvas)),e.arrFrames.push(n),clearInterval(e.interval),e.interval=setInterval(()=>{g(e.arrFrames[e.countFrames%e.arrFrames.length]),e.countFrames+=1},1e3/e.numFPS),q(".frames-imgs",e.arrFrames)}function T(e){const t=document.getElementById(e);t.webkitRequestFullScreen?t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen(),document.querySelector("#button-fullScreen").onclick=()=>{!function(e){document.cancelFullScreen(),document.querySelector("#button-fullScreen").onclick=()=>{T(e)}}(e)}}document.cancelFullScreen=document.cancelFullScreen||document.webkitCancelFullScreen;const N=JSON.parse(localStorage.getItem("object"));console.log(N);const A={};var B;A.numFPS=1,A.countFrames=0,A.selectedTool=r.pen,A.realWidthCanvas=320,A.widthFrame=32,A.arrFrames=[],A.prevPoint={},A.canvasMain=document.getElementById("canvasMain"),A.coords=A.canvasMain.getBoundingClientRect(),A.context=A.canvasMain.getContext("2d"),A.pointClick={},A.arrKeys=n,B=A,document.getElementById("lineFPS").addEventListener("click",()=>{!function(e,t){const a=document.getElementById("lineFPS").value;document.getElementById("displayFPS").innerHTML=`${a} FPS`,e.numFPS=a,clearInterval(e.interval),e.interval=setInterval(()=>{g(t[e.countFrames%t.length]),e.countFrames+=1},1e3/e.numFPS)}(B,B.arrFrames)}),document.getElementById("button-fullScreen").addEventListener("click",()=>{T("canvas-animation")}),function(e){const t=document.getElementById("myModal"),a=document.getElementById("myBtn"),r=document.getElementsByClassName("close")[0];a.onclick=()=>{t.style.display="block"},r.onclick=()=>{t.style.display="none"},window.onclick=e=>{e.target===t&&(t.style.display="none")};const n=document.getElementsByClassName("key-icon");Array.from(n).forEach(e=>{e.addEventListener("click",e=>{e.target.classList.contains("key-icon")&&e.target.classList.add("selected-key")})}),document.addEventListener("keydown",t=>{const a=document.getElementById("myModal");if("block"!==a.style.display)e.arrKeys[t.keyCode]&&i(e.arrKeys[t.keyCode],e);else{const r=a.querySelector(".selected-key");if(r){if(e.arrKeys[t.keyCode])return alert("this key is already reserved"),void r.classList.remove("selected-key");const a=e.arrKeys[r.querySelector("span").innerHTML.charCodeAt(0)];e.arrKeys[r.querySelector("span").innerHTML.charCodeAt(0)]=null,e.arrKeys[t.keyCode]=a,r.querySelector("span").innerHTML=String.fromCharCode(t.keyCode),r.classList.remove("selected-key")}}})}(A),document.addEventListener("contextmenu",e=>{e.preventDefault()}),function(e){e.canvasMain.addEventListener("mousedown",t=>{const a=e.canvasMain.getContext("2d"),n=document.querySelector("body");if(e.selectedTool===r.pen){let r,i,s;1===t.which?a.fillStyle=e.primaryColor:a.fillStyle=e.secondaryColor,o(e,t),e.canvasMain.addEventListener("mousemove",r=t=>{o(e,t)}),e.canvasMain.addEventListener("mouseout",i=()=>{l(e)}),n.addEventListener("mouseup",s=()=>{d(e,r,i,s)})}if(e.selectedTool===r.eraser){let r,i,s;t.which,a.fillStyle="#000000",o(e,t),e.canvasMain.addEventListener("mousemove",r=t=>{o(e,t)}),e.canvasMain.addEventListener("mouseout",i=()=>{l(e)}),n.addEventListener("mouseup",s=()=>{d(e,r,i,s)})}if(e.selectedTool===r.mirrorPen){let r,i,o;1===t.which?a.fillStyle=e.primaryColor:a.fillStyle=e.secondaryColor,c(e,t),e.canvasMain.addEventListener("mousemove",r=t=>{c(e,t)}),e.canvasMain.addEventListener("mouseout",i=()=>{l(e)}),n.addEventListener("mouseup",o=()=>{d(e,r,i,o)})}if(e.selectedTool===r.stroke){let r,i,o;1===t.which?a.fillStyle=e.primaryColor:a.fillStyle=e.secondaryColor,v(e.pointClick,e),a.fillRect(e.pointClick.x*(e.realWidthCanvas/e.widthFrame),e.pointClick.y*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),e.MainCanvasCopyImg=document.createElement("img"),e.MainCanvasCopyImg.src=e.canvasMain.toDataURL(),e.canvasMain.addEventListener("mousemove",r=t=>{!function(e,t){const a=e.canvasMain.getContext("2d");a.clearRect(0,0,e.canvasMain.width,e.canvasMain.height),a.drawImage(e.MainCanvasCopyImg,0,0,e.realWidthCanvas,e.realWidthCanvas);const r=Math.floor((t.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),n=Math.floor((t.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame));e.context.fillRect(r*(e.realWidthCanvas/e.widthFrame),n*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame);const i=r-e.pointClick.x,o=n-e.pointClick.y;let l,s;if(Math.abs(i)>Math.abs(o)){s=o;for(let t=(l=i)/Math.abs(l);Math.abs(t)<Math.abs(l);t+=l/Math.abs(l)){const a=Math.round(s*(Math.abs(t)/Math.abs(l)));e.context.fillRect((e.pointClick.x+t)*(e.realWidthCanvas/e.widthFrame),(e.pointClick.y+a)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}else{s=i;for(let t=(l=o)/Math.abs(l);Math.abs(t)<Math.abs(l);t+=l/Math.abs(l)){const a=Math.round(s*(Math.abs(t)/Math.abs(l)));e.context.fillRect((e.pointClick.x+a)*(e.realWidthCanvas/e.widthFrame),(e.pointClick.y+t)*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}}(e,t)}),e.canvasMain.addEventListener("mouseout",i=()=>{l(e)}),n.addEventListener("mouseup",o=()=>{d(e,r,i,o)})}if(e.selectedTool===r.paintBucket&&(1===t.which?a.fillStyle=e.primaryColor:a.fillStyle=e.secondaryColor,function(e,t){const a=[[Math.floor((t.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),Math.floor((t.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame))]],r=e.canvasMain.getContext("2d").getImageData(t.pageX-e.coords.left,t.pageY-e.coords.top,1,1).data;for(;a.length;){let t,n;const i=a.pop(),o=i[0];let l=i[1];for(;l>=0&&h(o,l,r,e);)l-=1;for(l+=1,t=!1,n=!1;l<e.widthFrame&&h(o,l,r,e);)m(o,l,e),o>0&&(h(o-1,l,r,e)?t||(a.push([o-1,l]),t=!0):t&&(t=!1)),o<e.widthFrame-1&&(h(o+1,l,r,e)?n||(a.push([o+1,l]),n=!0):n&&(n=!1)),l+=1}}(e,t)),e.selectedTool===r.paintAllPixels&&(1===t.which?a.fillStyle=e.primaryColor:a.fillStyle=e.secondaryColor,function(e,t){const a=e.canvasMain.getContext("2d").getImageData(t.pageX-e.coords.left,t.pageY-e.coords.top,1,1).data;for(let t=0;t<e.widthFrame;t++)for(let r=0;r<e.widthFrame;r++)h(r,t,a,e)&&m(r,t,e)}(e,t)),e.selectedTool===r.move){let t,a,r;v(e.pointClick,e),e.arrColors=function(e,t){const a=[];for(let r=0;r<t.widthFrame;r++){a[r]=[];for(let n=0;n<t.widthFrame;n++){const i=e.getContext("2d").getImageData(n*(t.realWidthCanvas/t.widthFrame),r*(t.realWidthCanvas/t.widthFrame),1,1).data;a[r][n]=p(...i)}}return a}(e.canvasMain,e),e.canvasMain.addEventListener("mousemove",t=t=>{C(e)}),e.canvasMain.addEventListener("mouseout",a=()=>{l(e)}),n.addEventListener("mouseup",r=()=>{d(e,t,a,r)})}if(e.selectedTool===r.rectangle){let r,i,o;1===t.which?a.fillStyle=e.primaryColor:a.fillStyle=e.secondaryColor,v(e.pointClick,e),a.fillRect(e.pointClick.x*(e.realWidthCanvas/e.widthFrame),e.pointClick.y*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),e.MainCanvasCopyImg=document.createElement("img"),e.MainCanvasCopyImg.src=e.canvasMain.toDataURL(),e.canvasMain.addEventListener("mousemove",r=t=>{!function(e,t){const a=Math.floor((t.pageX-e.coords.left)/(e.realWidthCanvas/e.widthFrame)),r=Math.floor((t.pageY-e.coords.top)/(e.realWidthCanvas/e.widthFrame)),n=a-e.pointClick.x,i=r-e.pointClick.y;if(e.pointClick.xPrev!==n||e.pointClick.yPrev!==i){e.pointClick.xPrev=n,e.pointClick.yPrev=i;const t=e.canvasMain.getContext("2d");let o,l,s,d;t.clearRect(0,0,e.canvasMain.width,e.canvasMain.height),t.drawImage(e.MainCanvasCopyImg,0,0,e.realWidthCanvas,e.realWidthCanvas),a>e.pointClick.x?(o=e.pointClick.x,l=a):(o=a,l=e.pointClick.x),r>e.pointClick.y?(s=e.pointClick.y,d=r):(s=r,d=e.pointClick.y);for(let a=s;a<=d;a++)t.fillRect(o*(e.realWidthCanvas/e.widthFrame),a*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),t.fillRect(l*(e.realWidthCanvas/e.widthFrame),a*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame);for(let a=o;a<=l;a++)t.fillRect(a*(e.realWidthCanvas/e.widthFrame),s*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame),t.fillRect(a*(e.realWidthCanvas/e.widthFrame),d*(e.realWidthCanvas/e.widthFrame),e.realWidthCanvas/e.widthFrame,e.realWidthCanvas/e.widthFrame)}}(e,t)}),e.canvasMain.addEventListener("mouseout",i=()=>{l(e)}),n.addEventListener("mouseup",o=()=>{d(e,r,i,o)})}if(e.selectedTool===r.circle){let r,i,o;1===t.which?a.fillStyle=e.primaryColor:a.fillStyle=e.secondaryColor,v(e.pointClick,e),e.MainCanvasCopyImg=document.createElement("img"),e.MainCanvasCopyImg.src=e.canvasMain.toDataURL(),e.canvasMain.addEventListener("mousemove",r=t=>{f(e,t)}),e.canvasMain.addEventListener("mouseout",i=()=>{l(e)}),n.addEventListener("mouseup",o=()=>{d(e,r,i,o)})}if(e.selectedTool===r.dithering){let a,r,i;y(e,t),e.canvasMain.addEventListener("mousemove",a=t=>{y(e,t)}),e.canvasMain.addEventListener("mouseout",r=()=>{l(e)}),n.addEventListener("mouseup",i=()=>{d(e,a,r,i)})}if(e.selectedTool===r.lighten){let a,r,i;w(e,t),e.canvasMain.addEventListener("mousemove",a=t=>{w(e,t)}),e.canvasMain.addEventListener("mouseout",r=()=>{l(e)}),n.addEventListener("mouseup",i=()=>{d(e,a,r,i)})}if(e.selectedTool===r.colorPicker){const r=p(...a.getImageData(t.pageX-e.coords.left,t.pageY-e.coords.top,1,1).data);a.fillStyle=r,1===t.which?(e.primaryColor=r,document.querySelector(".color-picker-first").value=r):3===t.which&&(e.secondaryColor=r,document.querySelector(".color-picker-second").value=r)}s(e.canvasMain)})}(A),function(e){clearInterval(e.interval),e.interval=setInterval(()=>{g(e.arrFrames[e.countFrames%e.arrFrames.length]),e.countFrames+=1},1e3/e.numFPS)}(A),function(e){e.arrFrames.push(document.querySelector(".img-wrap")),document.getElementById("add-frame").addEventListener("click",()=>{R(e)});const t=document.querySelectorAll(".img-frame-left");for(let a=0;a<t.length;a+=1){const r=t[a];r.addEventListener("click",F(r,e.realWidthCanvas))}const a=document.querySelector(".img-wrap"),r=document.querySelector(".img-frame-left");document.querySelector(".delete-frame").addEventListener("click",()=>{if(1===e.arrFrames.length)return void alert("can not delete last frame");r.classList.contains("selected")&&F(document.querySelector(".img-frame-left"),e.realWidthCanvas)(),a.parentNode.removeChild(a);const t=e.arrFrames.indexOf(a);e.arrFrames.splice(t,1)}),document.querySelector(".copy-frame").addEventListener("click",()=>{R(e,a)})}(A),function(e){!function(e){e.primaryColor="#00ff00",document.querySelector(".color-picker-first").value=e.primaryColor,e.secondaryColor="#0000ff",document.querySelector(".color-picker-second").value=e.secondaryColor,document.querySelector(".color-picker-first").oninput=()=>{e.primaryColor=document.querySelector(".color-picker-first").value},document.querySelector(".color-picker-second").oninput=()=>{e.secondaryColor=document.querySelector(".color-picker-second").value}}(e),document.querySelector(".tools-block").addEventListener("click",t=>{t.target.classList.contains("tool-icon")&&i(t.target,e),t.target.parentNode.classList.contains("tool-icon")&&i(t.target.parentNode,e)}),document.querySelector(".tools-block").addEventListener("mouseover",e=>{let t;if(e.target.parentNode.classList.contains("tool-icon")?t=e.target.parentNode:e.target.classList.contains("tool-icon")&&(t=e.target),t){const e=document.createElement("div");e.id="toolTip",e.innerHTML=function(e){return{pen:"pen tool","vertical mirror pen":"CTRL - horizontal axis; SHIFT - horizontal and vertical axiz","paint bucket":"paint bucket","paint all pixels of the same color":"paint all pixels of the same color",eraser:"eraser",stroke:"stroke",move:"move",rectangle:"rectangle",circle:"circle",lighten:"CTRL - darken",dithering:"dithering","color picker":"color picker"}[e]}(t.querySelector("p").innerHTML),e.classList.add("tooltip-class"),t.appendChild(e)}}),document.querySelector(".tools-block").addEventListener("mouseout",e=>{let t;e.target.parentNode.classList.contains("tool-icon")?t=e.target.parentNode:e.target.classList.contains("tool-icon")&&(t=e.target),t&&document.getElementById("toolTip").remove()})}(A),function(e){function t(t){const a=document.createElement("canvas"),r=a.getContext("2d");a.width=e.canvasMain.width,a.height=e.canvasMain.height;const n=e.realWidthCanvas*(t/e.widthFrame),i=document.querySelectorAll(".img-frame-left");for(let t=0;t<i.length;t++){if(i[t].classList.contains("selected")){const a=e.canvasMain.getContext("2d");a.clearRect(0,0,e.canvasMain.width,e.canvasMain.height),a.drawImage(i[t],0,0,n,n)}r.drawImage(i[t],0,0,n,n),i[t].src=a.toDataURL(),r.clearRect(0,0,a.width,a.height)}}document.querySelector("#resize32").onclick=()=>{const a=e.widthFrame;e.widthFrame=32,t(a)},document.querySelector("#resize64").onclick=()=>{const a=e.widthFrame;e.widthFrame=64,t(a)},document.querySelector("#resize128").onclick=()=>{const a=e.widthFrame;e.widthFrame=128,t(a)}}(A),setInterval(()=>{const e=JSON.stringify(A);localStorage.setItem("object",e)},5e3)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdG9vbHMvb2JqVG9vbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdG9vbHMvYXJyS2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90b29scy9zZWxlY3RUaGlzVG9vbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYWluQ2FudmFzL21vdmVQZW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9wZW5PdXRPZkNhbnZhcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYWluQ2FudmFzL3NpbXBsZUZ1bmN0aW9ucy91cGRhdGVJbWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9tb3VzZXVwT3V0T2ZDYW52YXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9tb3ZlTWlycm9yUGVuLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL21haW5DYW52YXMvbWF0Y2hTdGFydENvbG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL21haW5DYW52YXMvY29sb3JQaXhlbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYWluQ2FudmFzL3NhdmVDbGlja1BvaW50LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL21haW5DYW52YXMvc2ltcGxlRnVuY3Rpb25zL3JnYjJoZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9tb3ZlVG9vbE1vdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9tb3ZlQ2lyY2xlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL21haW5DYW52YXMvZHJhd0VsbGlwc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9jcmVhdGVBcnJDb2xvcnNGb3JDaXJjbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9tb3ZlRGl0aGVyaW5nLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL21haW5DYW52YXMvbW92ZWxpZ2h0ZW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZnJhbWVzL3RvZ2dsZVNlbGVjdGVkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FuaW1hdGlvbnMvZHJhd0Zyb21DYW52YXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2RyYWdvbmZseS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9mcmFtZXMvY3JlYXRlTmV3RnJhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2Z1bGxzY3JlZW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FuaW1hdGlvbnMvYWRkQ2hhbmdlRlBTZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYW5pbWF0aW9ucy9jaGFuZ2VGUFMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2FkZEZ1bGxzY3JlZW5FdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90b29scy9jcmVhdGVNb2RhbFdpbmRvdy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYWluQ2FudmFzL2NyZWF0ZU1haW5DYW52YXNFdmVudExpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL21haW5DYW52YXMvbW92ZVN0cm9rZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9tYWluQ2FudmFzL3BhaW50QnVja2V0LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL21haW5DYW52YXMvcGFpbnRCdWNrZXRBbGxQaXhlbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9jcmVhdGVBcnJDb2xvcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWFpbkNhbnZhcy9tb3ZlUmVjdGFuZ2xlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FuaW1hdGlvbnMvY3JlYXRlSW50ZXJ2YWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZnJhbWVzL2V2ZW50TGlzdGVuZXJGcmFtZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdG9vbHMvY3JlYXRlVG9vbHNMaXN0ZW5lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90b29scy9jb2xvclBpY2tlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90b29scy9nZXRUb29sdGlwVGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdGhlckJ1dHRvbnMvcmVzaXplRnJhbWVzLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiT2JqVG9vbHMiLCJwZW4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtaXJyb3JQZW4iLCJwYWludEJ1Y2tldCIsImVyYXNlciIsInBhaW50QWxsUGl4ZWxzIiwic3Ryb2tlIiwibW92ZSIsInJlY3RhbmdsZSIsImNpcmNsZSIsImxpZ2h0ZW4iLCJkaXRoZXJpbmciLCJjb2xvclBpY2tlciIsImFycktleXMiLCJzZWxlY3RUaGlzVG9vbCIsImVsIiwib2JqRGF0YSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwic2VsZWN0ZWRUb29sIiwibW92ZVBlbiIsImV2ZW50IiwibnVtSiIsIk1hdGgiLCJmbG9vciIsInBhZ2VYIiwiY29vcmRzIiwibGVmdCIsInJlYWxXaWR0aENhbnZhcyIsIndpZHRoRnJhbWUiLCJudW1JIiwicGFnZVkiLCJ0b3AiLCJjb250ZXh0IiwiZmlsbFJlY3QiLCJwcmV2UG9pbnQiLCJ4IiwieERlbCIsInlEZWwiLCJ5IiwibWF4IiwibWluIiwiYWJzIiwiaiIsInJvdW5kIiwicGVuT3V0T2ZDYW52YXMiLCJ1cGRhdGVJbWciLCJjYW52YXMiLCJzcmMiLCJ0b0RhdGFVUkwiLCJtb3VzZXVwT3V0T2ZDYW52YXMiLCJmdW5GaXJzdCIsImZ1blNlY29uZCIsImZ1blRoaXJkIiwiYm9keVRhZyIsImNhbnZhc01haW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibW92ZU1pcnJvclBlbiIsImdldENvbnRleHQiLCJjdHJsS2V5Iiwic2hpZnRLZXkiLCJtYXRjaFN0YXJ0Q29sb3IiLCJjb2xvckNsaWNrIiwiY29sb3JDZWxsIiwiZ2V0SW1hZ2VEYXRhIiwiZGF0YSIsImciLCJiIiwiY29sb3JQaXhlbCIsInNhdmVDbGlja1BvaW50IiwicG9pbnRDbGljayIsImNvbXBvbmVudFRvSGV4IiwiaGV4IiwidG9TdHJpbmciLCJsZW5ndGgiLCJyZ2IyaGV4IiwibW92ZVRvb2xNb3ZlIiwieFByZXYiLCJ5UHJldiIsImN0eCIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiZmlsbFN0eWxlIiwiYXJyQ29sb3JzIiwibW92ZUNpcmNsZSIsInhTdGFydCIsInhFbmQiLCJ5U3RhcnQiLCJ5RW5kIiwiZHJhd0ltYWdlIiwiTWFpbkNhbnZhc0NvcHlJbWciLCJjYW52YXNDaXJjbGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJjdHhDaXJjbGUiLCJsaW5lV2lkdGgiLCJzaXplcyIsImJlZ2luUGF0aCIsInNhdmUiLCJ0cmFuc2xhdGUiLCJzY2FsZSIsImFyYyIsIlBJIiwicmVzdG9yZSIsInN0cm9rZVN0eWxlIiwiY2xvc2VQYXRoIiwiZHJhd0VsbGlwc2UiLCJjYW52YXNDb3B5IiwiY3JlYXRlQXJyQ29sb3JzRm9yQ2lyY2xlIiwibW92ZURpdGhlcmluZyIsImV2ZW5OdW0iLCJwcmltYXJ5Q29sb3IiLCJzZWNvbmRhcnlDb2xvciIsImV2ZW5OdW1TIiwibW92ZWxpZ2h0ZW4iLCJjb2xvckNlbGxBcnJheSIsIkFycmF5IiwiZnJvbSIsInBvcCIsImRlbCIsImNvbG9yQ2VsbEhleCIsIm1hcCIsIml0ZW0iLCJjb2xvciIsImNlaWwiLCJ0b2dnbGVTZWxlY3RlZCIsImJ1dHRvbiIsInNlbGVjdGVkQnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJtb3ZlSW1nVG9NYWluQ2FudmFzIiwiZHJhd0Zyb21DYW52YXMiLCJmcmFtZSIsImZyYW1lSW1nIiwiaU1vdXNlRG93biIsImxNb3VzZVN0YXRlIiwiZHJhZ09iamVjdCIsIkRyYWdEcm9wcyIsImN1clRhcmdldCIsImxhc3RUYXJnZXQiLCJyb290UGFyZW50Iiwicm9vdFNpYmxpbmciLCJnZXRQb3NpdGlvbiIsImUiLCJvZmZzZXRQYXJlbnQiLCJvZmZzZXRMZWZ0IiwiY3VycmVudFN0eWxlIiwicGFyc2VJbnQiLCJib3JkZXJMZWZ0V2lkdGgiLCJOYU4wIiwib2Zmc2V0VG9wIiwiYm9yZGVyVG9wV2lkdGgiLCJtb3VzZU1vdmUiLCJldiIsImVsZW1lbnRJbnN0YW5jZSIsIndpbmRvdyIsImRyYWdIZWxwZXIiLCJhY3RpdmVDb250IiwidGFyZ2V0Iiwic3JjRWxlbWVudCIsIm1vdXNlUG9zIiwiY2xpZW50WCIsImJvZHkiLCJzY3JvbGxMZWZ0IiwiY2xpZW50TGVmdCIsImNsaWVudFkiLCJzY3JvbGxUb3AiLCJjbGllbnRUb3AiLCJtb3VzZUNvb3JkcyIsIm9yaWdDbGFzcyIsImRyYWdDb250cyIsInBvcyIsImdldEF0dHJpYnV0ZSIsImNsYXNzTmFtZSIsImRyYWdPYmoiLCJwYXJlbnROb2RlIiwibmV4dFNpYmxpbmciLCJjaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsImNsb25lTm9kZSIsImRpc3BsYXkiLCJmaXJzdENoaWxkIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJub2RlTmFtZSIsInhQb3MiLCJ5UG9zIiwiYmVmb3JlTm9kZSIsImluc2VydEJlZm9yZSIsInZpc2liaWxpdHkiLCJwb3NpdGlvbiIsImRyYWdvbmZseSIsImVsZW1lbnQiLCJhcnJGcmFtZXMiLCJjRHJhZyIsInB1c2giLCJjcmVhdGVEcmFnQ29udGFpbmVyIiwiY3NzVGV4dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbm1vdXNlZG93biIsIm1vdXNlRG93biIsIm1vdXNlVXAiLCJhcnIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3JlYXRlTmV3RnJhbWUiLCJleGlzdGluZ0ZyYW1lIiwibmV3SW1nIiwidW5kZWZpbmVkIiwiaW1nRnJhbWVFbENsb25lIiwiZnJhbWVzSW1ncyIsImZyYW1lV3JhcCIsImlubmVySFRNTCIsImJ1dHRvbkRlbGV0ZUZyYW1lIiwiYWxlcnQiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJidXR0b25Db3B5RnJhbWUiLCJidXR0b25JbWdzV3JhcHBlciIsImNsZWFySW50ZXJ2YWwiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY291bnRGcmFtZXMiLCJudW1GUFMiLCJlbnRlckZ1bGxzY3JlZW4iLCJpZCIsIndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIiwiRWxlbWVudCIsIkFMTE9XX0tFWUJPQVJEX0lOUFVUIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJvbmNsaWNrIiwiY2FuY2VsRnVsbFNjcmVlbiIsImV4aXRGdWxsc2NyZWVuIiwid2Via2l0Q2FuY2VsRnVsbFNjcmVlbiIsInJldE9iaiIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJjb25zb2xlIiwibG9nIiwic3JjX29iakRhdGEiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsaW5lRlBTIiwiY2hhbmdlRlBTIiwibW9kYWwiLCJidG4iLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImtleWJvYXJkU2hvcnRjdXRzIiwiZm9yRWFjaCIsIm1vZGFsRWwiLCJrZXlDb2RlIiwidG9vbCIsImNoYXJDb2RlQXQiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjcmVhdGVNb2RhbFdpbmRvdyIsInByZXZlbnREZWZhdWx0IiwibW92ZVBlbkZ1biIsInBlbk91dE9mQ2FudmFzRnVuIiwibW91c2V1cE91dE9mQ2FudmFzRnVuIiwid2hpY2giLCJtb3ZlTWlycm9yUGVuRnVuIiwibW92ZVN0cm9rZUZ1biIsIm1vdmVTdHJva2UiLCJwaXhlbFN0YWNrIiwicmVhY2hMZWZ0IiwicmVhY2hSaWdodCIsIm5ld1BvcyIsInBhaW50QnVja2V0QWxsUGl4ZWxzIiwibW92ZVRvb2xNb3ZlRnVuIiwiY3JlYXRlQXJyQ29sb3JzIiwibW92ZVJlY3RhbmdsZUZ1biIsIm1vdmVSZWN0YW5nbGUiLCJtb3ZlQ2lyY2xlRnVuIiwibW92ZURpdGhlcmluZ0Z1biIsIm1vdmVsaWdodGVuRnVuIiwiY3JlYXRlTWFpbkNhbnZhc0V2ZW50TGlzdGVuZXIiLCJjcmVhdGVJbnRlcnZhbCIsImltZ3NTZWxlY3RlZCIsImV2ZW50TGlzdGVuZXJGcmFtZXMiLCJvbmlucHV0IiwidG9vbEVsIiwidG9vbFRpcCIsInZlcnRpY2FsIG1pcnJvciBwZW4iLCJwYWludCBidWNrZXQiLCJwYWludCBhbGwgcGl4ZWxzIG9mIHRoZSBzYW1lIGNvbG9yIiwiY29sb3IgcGlja2VyIiwiZ2V0VG9vbHRpcFRleHQiLCJjcmVhdGVUb29sc0xpc3RlbmVyIiwicmVzaXplQWxsSW1ncyIsIm9sZFdpZHRoRnJhbWUiLCJuZXdDYW52YXMiLCJuZXdDb250ZXh0IiwiaW1hZ2VzTGVmdCIsInJlc2l6ZUZyYW1lcyIsInNPYmoiLCJzdHJpbmdpZnkiLCJzZXRJdGVtIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFB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QTlVLEdBQUFtRCxVQUFBQyxTQUFBLGFBQ0EsTUFBQStELEVBQUFqRSxFQUFBeUMsV0FBQUcsV0FBQSxNQUNBcUIsRUFBQUMsVUFBQSxJQUFBbEUsRUFBQXlDLFdBQUEwQixNQUFBbkUsRUFBQXlDLFdBQUEyQixRQUNBSCxFQUFBVyxVQUFBZ04sRUFBQTlVLEdBQUEsSUFBQXdFLEtBRUFxUSxFQUFBL00sVUFBQWdOLEVBQUE5VSxHQUFBLElBQUF3RSxLQUNBc1EsRUFBQTlVLEdBQUFvRixJQUFBd1AsRUFBQXZQLFlBRUF3UCxFQUFBek4sVUFBQSxJQUFBd04sRUFBQXZOLE1BQUF1TixFQUFBdE4sU0FHQXBGLFNBQUFDLGNBQUEsYUFBQTBPLFFBQUEsS0FDQSxNQUFBOEQsRUFBQXpSLEVBQUFlLFdBQ0FmLEVBQUFlLFdBQUEsR0FDQXlRLEVBQUFDLElBRUF6UyxTQUFBQyxjQUFBLGFBQUEwTyxRQUFBLEtBQ0EsTUFBQThELEVBQUF6UixFQUFBZSxXQUNBZixFQUFBZSxXQUFBLEdBQ0F5USxFQUFBQyxJQUVBelMsU0FBQUMsY0FBQSxjQUFBME8sUUFBQSxLQUNBLE1BQUE4RCxFQUFBelIsRUFBQWUsV0FDQWYsRUFBQWUsV0FBQSxJQUNBeVEsRUFBQUMsSWhCVUFJLENBQWF2RCxHQUdicEIsWUFBQSxLQUNBLE1BQUE0RSxFQUFBOUQsS0FBQStELFVBQWdDekQsR0FDaENKLGFBQUE4RCxRQUFBLFNBQUFGLElBQ0MiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIlxuXG5jb25zdCBPYmpUb29scyA9IHtcbiAgICBwZW46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wZW4nKSxcbiAgICBtaXJyb3JQZW46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC1taXJyb3ItcGVuJyksXG4gICAgcGFpbnRCdWNrZXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWludC1idWNrZXQnKSxcbiAgICBlcmFzZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcmFzZXInKSxcbiAgICBwYWludEFsbFBpeGVsczogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhaW50LUFsbC1waXhlbHMnKSxcbiAgICBzdHJva2U6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdHJva2UnKSxcbiAgICBtb3ZlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW92ZScpLFxuICAgIHJlY3RhbmdsZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlY3RhbmdsZScpLFxuICAgIGNpcmNsZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpcmNsZScpLFxuICAgIGxpZ2h0ZW46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saWdodGVuJyksXG4gICAgZGl0aGVyaW5nOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGl0aGVyaW5nJyksXG4gICAgY29sb3JQaWNrZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXInKSxcbn07XG5cbmV4cG9ydCB7IE9ialRvb2xzIH07XG4iLCJpbXBvcnQgeyBPYmpUb29scyB9IGZyb20gJy4vb2JqVG9vbHMnO1xuXG5jb25zdCBhcnJLZXlzID0gW107XG5hcnJLZXlzWzgwXSA9IE9ialRvb2xzLnBlbjtcbmFycktleXNbODZdID0gT2JqVG9vbHMubWlycm9yUGVuO1xuYXJyS2V5c1s2Nl0gPSBPYmpUb29scy5wYWludEJ1Y2tldDtcbmFycktleXNbNjVdID0gT2JqVG9vbHMucGFpbnRBbGxQaXhlbHM7XG5hcnJLZXlzWzY5XSA9IE9ialRvb2xzLmVyYXNlcjtcbmFycktleXNbNzZdID0gT2JqVG9vbHMuc3Ryb2tlO1xuYXJyS2V5c1s4Ml0gPSBPYmpUb29scy5yZWN0YW5nbGU7XG5hcnJLZXlzWzY3XSA9IE9ialRvb2xzLmNpcmNsZTtcbmFycktleXNbNzddID0gT2JqVG9vbHMubW92ZTtcbmFycktleXNbODVdID0gT2JqVG9vbHMubGlnaHRlbjtcbmFycktleXNbODRdID0gT2JqVG9vbHMuZGl0aGVyaW5nO1xuYXJyS2V5c1s3OV0gPSBPYmpUb29scy5jb2xvclBpY2tlcjtcblxuZXhwb3J0IHsgYXJyS2V5cyB9O1xuIiwiXG5mdW5jdGlvbiBzZWxlY3RUaGlzVG9vbChlbCwgb2JqRGF0YSkge1xuICAgIGlmICghZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZFRvb2wnKSkge1xuICAgICAgICBjb25zdCBvbGRTZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZFRvb2wnKTtcbiAgICAgICAgb2xkU2VsZWN0ZWQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWRUb29sJyk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkVG9vbCcpO1xuICAgICAgICBvYmpEYXRhLnNlbGVjdGVkVG9vbCA9IGVsO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgc2VsZWN0VGhpc1Rvb2wgfTtcbiIsIlxuXG5mdW5jdGlvbiBtb3ZlUGVuKG9iakRhdGEsIGV2ZW50KSB7XG4gICAgY29uc3QgbnVtSiA9IE1hdGguZmxvb3IoKGV2ZW50LnBhZ2VYIC0gb2JqRGF0YS5jb29yZHMubGVmdClcbiAgICAgICAgLyAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpKTtcbiAgICBjb25zdCBudW1JID0gTWF0aC5mbG9vcigoZXZlbnQucGFnZVkgLSBvYmpEYXRhLmNvb3Jkcy50b3ApXG4gICAgICAgIC8gKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSk7XG4gICAgb2JqRGF0YS5jb250ZXh0LmZpbGxSZWN0KG51bUogKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBudW1JXG4gICAgICAgICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcblxuICAgIGlmIChvYmpEYXRhLnByZXZQb2ludC54KSB7XG4gICAgICAgIGNvbnN0IHhEZWwgPSBudW1KIC0gb2JqRGF0YS5wcmV2UG9pbnQueDtcbiAgICAgICAgY29uc3QgeURlbCA9IG51bUkgLSBvYmpEYXRhLnByZXZQb2ludC55O1xuICAgICAgICBsZXQgbWF4O1xuICAgICAgICBsZXQgbWluO1xuICAgICAgICBpZiAoTWF0aC5hYnMoeERlbCkgPiBNYXRoLmFicyh5RGVsKSAmJiBNYXRoLmFicyh4RGVsKSA+IDEpIHtcbiAgICAgICAgICAgIG1heCA9IHhEZWw7XG4gICAgICAgICAgICBtaW4gPSB5RGVsO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gbWF4IC8gTWF0aC5hYnMobWF4KTsgTWF0aC5hYnMoailcbiAgICAgICAgICAgICAgICA8IE1hdGguYWJzKG1heCk7IGogKz0gbWF4IC8gTWF0aC5hYnMobWF4KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBNYXRoLnJvdW5kKG1pbiAqIChNYXRoLmFicyhqKSAvIE1hdGguYWJzKG1heCkpKTtcbiAgICAgICAgICAgICAgICBvYmpEYXRhLmNvbnRleHQuZmlsbFJlY3QoKG9iakRhdGEucHJldlBvaW50LnggKyBqKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSksIChvYmpEYXRhLnByZXZQb2ludC55ICsgaSkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKE1hdGguYWJzKHlEZWwpID4gMSkge1xuICAgICAgICAgICAgbWF4ID0geURlbDtcbiAgICAgICAgICAgIG1pbiA9IHhEZWw7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBtYXggLyBNYXRoLmFicyhtYXgpOyBNYXRoLmFicyhpKVxuICAgICAgICAgICAgICAgIDwgTWF0aC5hYnMobWF4KTsgaSArPSBtYXggLyBNYXRoLmFicyhtYXgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaiA9IE1hdGgucm91bmQobWluICogKE1hdGguYWJzKGkpIC8gTWF0aC5hYnMobWF4KSkpO1xuICAgICAgICAgICAgICAgIG9iakRhdGEuY29udGV4dC5maWxsUmVjdCgob2JqRGF0YS5wcmV2UG9pbnQueCArIGopICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKG9iakRhdGEucHJldlBvaW50LnkgKyBpKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSksIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2JqRGF0YS5wcmV2UG9pbnQueCA9IG51bUo7XG4gICAgb2JqRGF0YS5wcmV2UG9pbnQueSA9IG51bUk7XG59XG5cbmV4cG9ydCB7IG1vdmVQZW4gfTtcbiIsIlxuZnVuY3Rpb24gcGVuT3V0T2ZDYW52YXMob2JqRGF0YSkge1xuICAgIG9iakRhdGEucHJldlBvaW50LnggPSBudWxsO1xuICAgIG9iakRhdGEucHJldlBvaW50LnkgPSBudWxsO1xufVxuXG5leHBvcnQge3Blbk91dE9mQ2FudmFzfTtcbiIsIlxuXG5mdW5jdGlvbiB1cGRhdGVJbWcoY2FudmFzKSB7XG4gICAgY29uc3QgaW1hZ2VDb3B5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkJyk7XG4gICAgLy8gZHJhdyBmcm9tIGNhbnZhcyB0byA8aW1nPlxuICAgIGltYWdlQ29weS5zcmMgPSBjYW52YXMudG9EYXRhVVJMKCk7XG59XG5cbmV4cG9ydCB7IHVwZGF0ZUltZyB9O1xuIiwiaW1wb3J0IHsgT2JqVG9vbHMgfSBmcm9tICcuLi90b29scy9vYmpUb29scyc7XG5pbXBvcnQgeyB1cGRhdGVJbWcgfSBmcm9tICcuL3NpbXBsZUZ1bmN0aW9ucy91cGRhdGVJbWcnO1xuXG5cbmZ1bmN0aW9uIG1vdXNldXBPdXRPZkNhbnZhcyhvYmpEYXRhLCBmdW5GaXJzdCwgZnVuU2Vjb25kLCBmdW5UaGlyZCkge1xuICAgIGNvbnN0IGJvZHlUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgLy8gaWYgc2VsZWN0ZWQgUEVOXG4gICAgaWYgKG9iakRhdGEuc2VsZWN0ZWRUb29sID09PSBPYmpUb29scy5wZW4gfHwgb2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLmVyYXNlclxuICAgICAgICB8fCBvYmpEYXRhLnNlbGVjdGVkVG9vbCA9PT0gT2JqVG9vbHMubWlycm9yUGVuXG4gICAgICAgIHx8IG9iakRhdGEuc2VsZWN0ZWRUb29sID09PSBPYmpUb29scy5kaXRoZXJpbmcpIHtcbiAgICAgICAgLy8gZGVsZXRlIGV2ZW50bGlzdGVuZXIgb24gbW92ZVxuICAgICAgICBvYmpEYXRhLmNhbnZhc01haW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuRmlyc3QpO1xuICAgICAgICBvYmpEYXRhLmNhbnZhc01haW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBmdW5TZWNvbmQpO1xuICAgICAgICBib2R5VGFnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5UaGlyZCk7XG5cbiAgICAgICAgb2JqRGF0YS5wcmV2UG9pbnQueCA9IG51bGw7XG4gICAgICAgIG9iakRhdGEucHJldlBvaW50LnkgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChvYmpEYXRhLnNlbGVjdGVkVG9vbCA9PT0gT2JqVG9vbHMuc3Ryb2tlIHx8IG9iakRhdGEuc2VsZWN0ZWRUb29sID09PSBPYmpUb29scy5tb3ZlXG4gICAgICAgIHx8IG9iakRhdGEuc2VsZWN0ZWRUb29sID09PSBPYmpUb29scy5yZWN0YW5nbGUgfHwgb2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLmNpcmNsZVxuICAgICAgICB8fCBvYmpEYXRhLnNlbGVjdGVkVG9vbCA9PT0gT2JqVG9vbHMubGlnaHRlbikge1xuICAgICAgICAvLyBkZWxldGUgZXZlbnRsaXN0ZW5lciBvbiBtb3ZlXG4gICAgICAgIG9iakRhdGEuY2FudmFzTWFpbi5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5GaXJzdCk7XG4gICAgICAgIG9iakRhdGEuY2FudmFzTWFpbi5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1blNlY29uZCk7XG4gICAgICAgIGJvZHlUYWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1blRoaXJkKTtcbiAgICB9XG5cblxuICAgIC8vIGZ1bmN0aW9uIHVwZGF0ZSBpbWcgbGVmdFxuICAgIHVwZGF0ZUltZyhvYmpEYXRhLmNhbnZhc01haW4pO1xufVxuXG5leHBvcnQgeyBtb3VzZXVwT3V0T2ZDYW52YXMgfTtcbiIsIlxuXG5mdW5jdGlvbiBtb3ZlTWlycm9yUGVuKG9iakRhdGEsIGV2ZW50KSB7XG4gICAgY29uc3QgY29udGV4dCA9IG9iakRhdGEuY2FudmFzTWFpbi5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnN0IG51bUogPSBNYXRoLmZsb29yKChldmVudC5wYWdlWCAtIG9iakRhdGEuY29vcmRzLmxlZnQpXG4gICAgICAgIC8gKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSk7XG4gICAgY29uc3QgbnVtSSA9IE1hdGguZmxvb3IoKGV2ZW50LnBhZ2VZIC0gb2JqRGF0YS5jb29yZHMudG9wKVxuICAgICAgICAvIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSkpO1xuXG4gICAgY29udGV4dC5maWxsUmVjdChudW1KICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSxcbiAgICAgICAgbnVtSSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG5cbiAgICBpZiAoZXZlbnQuY3RybEtleSkge1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KChudW1KKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgICAgICAob2JqRGF0YS53aWR0aEZyYW1lIC0gMSAtIG51bUkpICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSxcbiAgICAgICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lLFxuICAgICAgICAgICAgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgob2JqRGF0YS53aWR0aEZyYW1lIC0gMSAtIG51bUopICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSksIG51bUkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoKG51bUopICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSxcbiAgICAgICAgICAgIChvYmpEYXRhLndpZHRoRnJhbWUgLSAxIC0gbnVtSSkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICAgICAgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUsXG4gICAgICAgICAgICBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG5cbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgob2JqRGF0YS53aWR0aEZyYW1lIC0gMSAtIG51bUopICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgIChvYmpEYXRhLndpZHRoRnJhbWUgLSAxIC0gbnVtSSkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoKG9iakRhdGEud2lkdGhGcmFtZSAtIDEgLSBudW1KKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBudW1JICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSxcbiAgICAgICAgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcbiAgICB9XG5cblxuICAgIGlmIChvYmpEYXRhLnByZXZQb2ludC54KSB7XG4gICAgICAgIGNvbnN0IHhEZWwgPSBudW1KIC0gb2JqRGF0YS5wcmV2UG9pbnQueDtcbiAgICAgICAgY29uc3QgeURlbCA9IG51bUkgLSBvYmpEYXRhLnByZXZQb2ludC55O1xuICAgICAgICBsZXQgbWF4O1xuICAgICAgICBsZXQgbWluO1xuICAgICAgICBpZiAoTWF0aC5hYnMoeERlbCkgPiBNYXRoLmFicyh5RGVsKSAmJiBNYXRoLmFicyh4RGVsKSA+IDEpIHtcbiAgICAgICAgICAgIG1heCA9IHhEZWw7XG4gICAgICAgICAgICBtaW4gPSB5RGVsO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gbWF4IC8gTWF0aC5hYnMobWF4KTtcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhqKSA8IE1hdGguYWJzKG1heCk7IGogKz0gbWF4IC8gTWF0aC5hYnMobWF4KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBNYXRoLnJvdW5kKG1pbiAqIChNYXRoLmFicyhqKSAvIE1hdGguYWJzKG1heCkpKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxSZWN0KChvYmpEYXRhLnByZXZQb2ludC54ICsgaikgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICAgICAgICAgIChvYmpEYXRhLnByZXZQb2ludC55ICsgaSkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICAgICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lLFxuICAgICAgICAgICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcblxuICAgICAgICAgICAgICAgIGlmIChldmVudC5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoKG9iakRhdGEucHJldlBvaW50LnggKyBqKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAob2JqRGF0YS53aWR0aEZyYW1lIC0gMSAtIChvYmpEYXRhLnByZXZQb2ludC55ICsgaSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdCgob2JqRGF0YS53aWR0aEZyYW1lIC0gMSAtIChvYmpEYXRhLnByZXZQb2ludC54ICsgaikpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIChvYmpEYXRhLnByZXZQb2ludC55ICsgaSlcbiAgICAgICAgICAgICAgICAgICAgICAgICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoKG9iakRhdGEucHJldlBvaW50LnggKyBqKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAob2JqRGF0YS53aWR0aEZyYW1lIC0gMSAtIChvYmpEYXRhLnByZXZQb2ludC55ICsgaSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxSZWN0KChvYmpEYXRhLndpZHRoRnJhbWUgLSAxIC0gKG9iakRhdGEucHJldlBvaW50LnggKyBqKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKG9iakRhdGEud2lkdGhGcmFtZSAtIDFcbiAgICAgICAgICAgICAgICAgICAgICAgIC0gKG9iakRhdGEucHJldlBvaW50LnkgKyBpKSkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdCgob2JqRGF0YS53aWR0aEZyYW1lIC0gMSAtIChvYmpEYXRhLnByZXZQb2ludC54ICsgaikpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIChvYmpEYXRhLnByZXZQb2ludC55ICsgaSlcbiAgICAgICAgICAgICAgICAgICAgICAgICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKE1hdGguYWJzKHlEZWwpID4gMSkge1xuICAgICAgICAgICAgbWF4ID0geURlbDtcbiAgICAgICAgICAgIG1pbiA9IHhEZWw7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBtYXggLyBNYXRoLmFicyhtYXgpOyBNYXRoLmFicyhpKVxuICAgICAgICAgICAgICAgIDwgTWF0aC5hYnMobWF4KTsgaSArPSBtYXggLyBNYXRoLmFicyhtYXgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaiA9IE1hdGgucm91bmQobWluICogKE1hdGguYWJzKGkpIC8gTWF0aC5hYnMobWF4KSkpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoKG9iakRhdGEucHJldlBvaW50LnggKyBqKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSksIChvYmpEYXRhLnByZXZQb2ludC55ICsgaSkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxSZWN0KChvYmpEYXRhLnByZXZQb2ludC54ICsgaikgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKG9iakRhdGEud2lkdGhGcmFtZSAtIDEgLSAob2JqRGF0YS5wcmV2UG9pbnQueSArIGkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoKG9iakRhdGEud2lkdGhGcmFtZSAtIDEgLSAob2JqRGF0YS5wcmV2UG9pbnQueCArIGopKVxuICAgICAgICAgICAgICAgICAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAob2JqRGF0YS5wcmV2UG9pbnQueSArIGkpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxSZWN0KChvYmpEYXRhLnByZXZQb2ludC54ICsgaikgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKG9iakRhdGEud2lkdGhGcmFtZSAtIDEgLSAob2JqRGF0YS5wcmV2UG9pbnQueSArIGkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdCgob2JqRGF0YS53aWR0aEZyYW1lIC0gMSAtIChvYmpEYXRhLnByZXZQb2ludC54ICsgaikpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIChvYmpEYXRhLndpZHRoRnJhbWUgLSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAtIChvYmpEYXRhLnByZXZQb2ludC55ICsgaSkpICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSksIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoKG9iakRhdGEud2lkdGhGcmFtZSAtIDEgLSAob2JqRGF0YS5wcmV2UG9pbnQueCArIGopKVxuICAgICAgICAgICAgICAgICAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAob2JqRGF0YS5wcmV2UG9pbnQueSArIGkpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnRleHQuZmlsbFJlY3QobnVtSiAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIG51bUlcbiAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuXG4gICAgb2JqRGF0YS5wcmV2UG9pbnQueCA9IG51bUo7XG4gICAgb2JqRGF0YS5wcmV2UG9pbnQueSA9IG51bUk7XG59XG5cbmV4cG9ydCB7IG1vdmVNaXJyb3JQZW4gfTtcbiIsIlxuXG5mdW5jdGlvbiBtYXRjaFN0YXJ0Q29sb3IoeCwgeSwgY29sb3JDbGljaywgb2JqRGF0YSkge1xuICAgIGNvbnN0IGN0eCA9IG9iakRhdGEuY2FudmFzTWFpbi5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnN0IGNvbG9yQ2VsbCA9IGN0eC5nZXRJbWFnZURhdGEoeCAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgIHkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAxLCAxKS5kYXRhO1xuXG4gICAgY29uc3QgciA9IGNvbG9yQ2VsbFswXTtcbiAgICBjb25zdCBnID0gY29sb3JDZWxsWzFdO1xuICAgIGNvbnN0IGIgPSBjb2xvckNlbGxbMl07XG5cbiAgICByZXR1cm4gKHIgPT09IGNvbG9yQ2xpY2tbMF0gJiYgZyA9PT0gY29sb3JDbGlja1sxXSAmJiBiID09PSBjb2xvckNsaWNrWzJdKTtcbn1cblxuZXhwb3J0IHsgbWF0Y2hTdGFydENvbG9yIH07XG4iLCJcbmZ1bmN0aW9uIGNvbG9yUGl4ZWwoeCwgeSwgb2JqRGF0YSkge1xuICAgIG9iakRhdGEuY29udGV4dC5maWxsUmVjdCh4ICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSxcbiAgICAgICAgeSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG59XG5cbmV4cG9ydCB7IGNvbG9yUGl4ZWwgfTtcbiIsIlxuZnVuY3Rpb24gc2F2ZUNsaWNrUG9pbnQocG9pbnRDbGljaywgb2JqRGF0YSkge1xuICAgIGNvbnN0IG51bUogPSBNYXRoLmZsb29yKChldmVudC5wYWdlWCAtIG9iakRhdGEuY29vcmRzLmxlZnQpXG4gICAgICAgIC8gKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSk7XG4gICAgY29uc3QgbnVtSSA9IE1hdGguZmxvb3IoKGV2ZW50LnBhZ2VZIC0gb2JqRGF0YS5jb29yZHMudG9wKVxuICAgICAgICAvIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSkpO1xuXG4gICAgcG9pbnRDbGljay54ID0gbnVtSjtcbiAgICBwb2ludENsaWNrLnkgPSBudW1JO1xufVxuXG5leHBvcnQge3NhdmVDbGlja1BvaW50fTtcbiIsIlxuZnVuY3Rpb24gY29tcG9uZW50VG9IZXgoYykge1xuICAgIGNvbnN0IGhleCA9IGMudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBoZXgubGVuZ3RoID09PSAxID8gYDAke2hleH1gIDogaGV4O1xufVxuXG5mdW5jdGlvbiByZ2IyaGV4KHIsIGcsIGIpIHtcbiAgICByZXR1cm4gYCMke2NvbXBvbmVudFRvSGV4KHIpfSR7Y29tcG9uZW50VG9IZXgoZyl9JHtjb21wb25lbnRUb0hleChiKX1gO1xufVxuXG5leHBvcnQgeyByZ2IyaGV4IH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuXG5cbmZ1bmN0aW9uIG1vdmVUb29sTW92ZShvYmpEYXRhKSB7XG4gICAgY29uc3QgbnVtSiA9IE1hdGguZmxvb3IoKGV2ZW50LnBhZ2VYIC0gb2JqRGF0YS5jb29yZHMubGVmdClcbiAgICAgICAgLyAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpKTtcbiAgICBjb25zdCBudW1JID0gTWF0aC5mbG9vcigoZXZlbnQucGFnZVkgLSBvYmpEYXRhLmNvb3Jkcy50b3ApXG4gICAgICAgIC8gKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSk7XG5cbiAgICBjb25zdCB4RGVsID0gbnVtSiAtIG9iakRhdGEucG9pbnRDbGljay54O1xuICAgIGNvbnN0IHlEZWwgPSBudW1JIC0gb2JqRGF0YS5wb2ludENsaWNrLnk7XG5cblxuICAgIGlmICgoTWF0aC5hYnMoeERlbCkgPiAwICYmIG9iakRhdGEucG9pbnRDbGljay54UHJldiAhPT0geERlbClcbiAgICAgICAgfHwgKE1hdGguYWJzKHlEZWwpID4gMCAmJiBvYmpEYXRhLnBvaW50Q2xpY2sueVByZXYgIT09IHlEZWwpKSB7XG4gICAgICAgIG9iakRhdGEucG9pbnRDbGljay54UHJldiA9IHhEZWw7XG4gICAgICAgIG9iakRhdGEucG9pbnRDbGljay55UHJldiA9IHlEZWw7XG5cbiAgICAgICAgY29uc3QgY3R4ID0gb2JqRGF0YS5jYW52YXNNYWluLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgb2JqRGF0YS5jYW52YXNNYWluLndpZHRoLCBvYmpEYXRhLmNhbnZhc01haW4uaGVpZ2h0KTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iakRhdGEud2lkdGhGcmFtZTsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG9iakRhdGEud2lkdGhGcmFtZTsgaisrKSB7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9iakRhdGEuYXJyQ29sb3JzW2ldW2pdO1xuXG4gICAgICAgICAgICAgICAgb2JqRGF0YS5jb250ZXh0LmZpbGxSZWN0KCh4RGVsICsgailcbiAgICAgICAgICAgICAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAoeURlbCArIGkpXG4gICAgICAgICAgICAgICAgICAgICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IHsgbW92ZVRvb2xNb3ZlIH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuaW1wb3J0IHsgZHJhd0VsbGlwc2UgfSBmcm9tICcuL2RyYXdFbGxpcHNlJztcbmltcG9ydCB7IGNyZWF0ZUFyckNvbG9yc0ZvckNpcmNsZSB9IGZyb20gJy4vY3JlYXRlQXJyQ29sb3JzRm9yQ2lyY2xlJztcblxuZnVuY3Rpb24gbW92ZUNpcmNsZShvYmpEYXRhLCBldmVudCkge1xuICAgIGNvbnN0IG51bUogPSBNYXRoLmZsb29yKChldmVudC5wYWdlWCAtIG9iakRhdGEuY29vcmRzLmxlZnQpXG4gICAgICAgIC8gKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSk7XG4gICAgY29uc3QgbnVtSSA9IE1hdGguZmxvb3IoKGV2ZW50LnBhZ2VZIC0gb2JqRGF0YS5jb29yZHMudG9wKVxuICAgICAgICAvIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSkpO1xuXG4gICAgY29uc3QgeERlbCA9IG51bUogLSBvYmpEYXRhLnBvaW50Q2xpY2sueDtcbiAgICBjb25zdCB5RGVsID0gbnVtSSAtIG9iakRhdGEucG9pbnRDbGljay55O1xuXG5cbiAgICBpZiAoKE1hdGguYWJzKHhEZWwpID4gMiAmJiBvYmpEYXRhLnBvaW50Q2xpY2sueFByZXYgIT09IHhEZWwpXG4gICAgICAgIHx8IChNYXRoLmFicyh5RGVsKSA+IDIgJiYgb2JqRGF0YS5wb2ludENsaWNrLnlQcmV2ICE9PSB5RGVsKSkge1xuICAgICAgICBvYmpEYXRhLnBvaW50Q2xpY2sueFByZXYgPSB4RGVsO1xuICAgICAgICBvYmpEYXRhLnBvaW50Q2xpY2sueVByZXYgPSB5RGVsO1xuXG4gICAgICAgIGNvbnN0IGN0eCA9IG9iakRhdGEuY2FudmFzTWFpbi5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIG9iakRhdGEuY2FudmFzTWFpbi53aWR0aCwgb2JqRGF0YS5jYW52YXNNYWluLmhlaWdodCk7XG5cbiAgICAgICAgY3R4LmRyYXdJbWFnZShvYmpEYXRhLk1haW5DYW52YXNDb3B5SW1nLCAwLCAwLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyxcbiAgICAgICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzKTtcblxuICAgICAgICBsZXQgeFN0YXJ0O1xuICAgICAgICBsZXQgeEVuZDtcbiAgICAgICAgbGV0IHlTdGFydDtcbiAgICAgICAgbGV0IHlFbmQ7XG4gICAgICAgIGlmIChudW1KID4gb2JqRGF0YS5wb2ludENsaWNrLngpIHtcbiAgICAgICAgICAgIHhTdGFydCA9IG9iakRhdGEucG9pbnRDbGljay54O1xuICAgICAgICAgICAgeEVuZCA9IG51bUo7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4U3RhcnQgPSBudW1KO1xuICAgICAgICAgICAgeEVuZCA9IG9iakRhdGEucG9pbnRDbGljay54O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51bUkgPiBvYmpEYXRhLnBvaW50Q2xpY2sueSkge1xuICAgICAgICAgICAgeVN0YXJ0ID0gb2JqRGF0YS5wb2ludENsaWNrLnk7XG4gICAgICAgICAgICB5RW5kID0gbnVtSTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHlTdGFydCA9IG51bUk7XG4gICAgICAgICAgICB5RW5kID0gb2JqRGF0YS5wb2ludENsaWNrLnk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY3JlYXRlIG5ldyBjYW52YXMsIGFuZCB0aGFuIGdldCBpbmZvcm1hdGlvbiBmcm9tIHRoaXNcbiAgICAgICAgY29uc3QgY2FudmFzQ2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNhbnZhc0NpcmNsZS53aWR0aCA9IG9iakRhdGEud2lkdGhGcmFtZTtcbiAgICAgICAgY2FudmFzQ2lyY2xlLmhlaWdodCA9IG9iakRhdGEud2lkdGhGcmFtZTtcblxuICAgICAgICBjYW52YXNDaXJjbGUuc3R5bGUud2lkdGggPSBgJHtvYmpEYXRhLndpZHRoRnJhbWV9cHhgO1xuICAgICAgICBjYW52YXNDaXJjbGUuc3R5bGUuaGVpZ2h0ID0gYCR7b2JqRGF0YS53aWR0aEZyYW1lfXB4YDtcblxuICAgICAgICBjb25zdCBjdHhDaXJjbGUgPSBjYW52YXNDaXJjbGUuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBjdHhDaXJjbGUubGluZVdpZHRoID0gMTtcbiAgICAgICAgZHJhd0VsbGlwc2UoY3R4Q2lyY2xlLCBbeFN0YXJ0ICsgKHhFbmQgLSB4U3RhcnQpIC8gMiwgeVN0YXJ0ICsgKHlFbmQgLSB5U3RhcnQpIC8gMl0sXG4gICAgICAgICAgICBbKHhFbmQgLSB4U3RhcnQpIC8gMiwgKHlFbmQgLSB5U3RhcnQpIC8gMl0sIDAsIDEwMDApO1xuXG4gICAgICAgIG9iakRhdGEuYXJyQ29sb3JzID0gY3JlYXRlQXJyQ29sb3JzRm9yQ2lyY2xlKGNhbnZhc0NpcmNsZSwgb2JqRGF0YSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYmpEYXRhLndpZHRoRnJhbWU7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBvYmpEYXRhLndpZHRoRnJhbWU7IGorKykge1xuICAgICAgICAgICAgICAgIC8vINC30LDQv9C+0LvQvdC40YLRjCBtYWluY2FudmFzINCy0YvQsdGA0LDQvdC90YvQvCDQutCw0LTRgNC+0LwtaW1nXG4gICAgICAgICAgICAgICAgaWYgKG9iakRhdGEuYXJyQ29sb3JzW2ldW2pdID09PSAnI2ZmMDAwMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqRGF0YS5jb250ZXh0LmZpbGxSZWN0KChqKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAoaSkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQge21vdmVDaXJjbGV9O1xuIiwiXG5cbmZ1bmN0aW9uIGRyYXdFbGxpcHNlKGN0eCwgY29vcmRzLCBzaXplcykge1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguc2F2ZSgpOyAvLyBzYXZlIGNvbnRleHRcbiAgICBjdHgudHJhbnNsYXRlKGNvb3Jkc1swXSwgY29vcmRzWzFdKTtcblxuICAgIGN0eC5zY2FsZSgxLCBzaXplc1sxXSAvIHNpemVzWzBdKTtcbiAgICBjdHguYXJjKDAsIDAsIHNpemVzWzBdLCAwLCBNYXRoLlBJICogMik7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZmMDAwMCc7XG4gICAgY3R4LnN0cm9rZSgpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbn1cblxuZXhwb3J0IHtkcmF3RWxsaXBzZX07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuaW1wb3J0IHsgcmdiMmhleCB9IGZyb20gJy4vc2ltcGxlRnVuY3Rpb25zL3JnYjJoZXgnO1xuXG5mdW5jdGlvbiBjcmVhdGVBcnJDb2xvcnNGb3JDaXJjbGUoY2FudmFzQ29weSwgb2JqRGF0YSkge1xuICAgIGNvbnN0IGFyckNvbG9ycyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqRGF0YS53aWR0aEZyYW1lOyBpKyspIHtcbiAgICAgICAgYXJyQ29sb3JzW2ldID0gW107XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgb2JqRGF0YS53aWR0aEZyYW1lOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eENvcHkgPSBjYW52YXNDb3B5LmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBjb25zdCBjb2xvckNlbGwgPSBjdHhDb3B5LmdldEltYWdlRGF0YShqLCBpLCAxLCAxKS5kYXRhO1xuXG4gICAgICAgICAgICBhcnJDb2xvcnNbaV1bal0gPSByZ2IyaGV4KC4uLmNvbG9yQ2VsbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyckNvbG9ycztcbn1cblxuZXhwb3J0IHtjcmVhdGVBcnJDb2xvcnNGb3JDaXJjbGV9O1xuIiwiXG5mdW5jdGlvbiBtb3ZlRGl0aGVyaW5nKG9iakRhdGEsIGV2ZW50KSB7XG4gICAgY29uc3QgY29udGV4dCA9IG9iakRhdGEuY2FudmFzTWFpbi5nZXRDb250ZXh0KCcyZCcpO1xuICAgIC8vIGRlZmluZSBzcXVhcmUgb2YgY2FudmFzIHdoZXJlIHdhcyBjbGlja1xuICAgIGNvbnN0IG51bUogPSBNYXRoLmZsb29yKChldmVudC5wYWdlWCAtIG9iakRhdGEuY29vcmRzLmxlZnQpXG4gICAgIC8gKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSk7XG4gICAgY29uc3QgbnVtSSA9IE1hdGguZmxvb3IoKGV2ZW50LnBhZ2VZIC0gb2JqRGF0YS5jb29yZHMudG9wKVxuICAgICAvIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSkpO1xuXG4gICAgY29uc3QgZXZlbk51bSA9IChudW1KICsgbnVtSSkgJSAyO1xuICAgIGlmIChldmVuTnVtKSB7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gb2JqRGF0YS5wcmltYXJ5Q29sb3I7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBvYmpEYXRhLnNlY29uZGFyeUNvbG9yO1xuICAgIH1cbiAgICAvLyBmaWxsIHNxdWFyZVxuICAgIGNvbnRleHQuZmlsbFJlY3QobnVtSiAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgIG51bUkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgIC8vIGlmIG1vdmVkXG4gICAgaWYgKG9iakRhdGEucHJldlBvaW50LngpIHtcbiAgICAgICAgLy8gZGVmaW5lIGxhcmdlc3QgZGlzdGFuY2UgYmV0d2VlbiBwb2ludHNcbiAgICAgICAgY29uc3QgeERlbCA9IG51bUogLSBvYmpEYXRhLnByZXZQb2ludC54O1xuICAgICAgICBjb25zdCB5RGVsID0gbnVtSSAtIG9iakRhdGEucHJldlBvaW50Lnk7XG4gICAgICAgIGxldCBtYXg7XG4gICAgICAgIGxldCBtaW47XG4gICAgICAgIGlmIChNYXRoLmFicyh4RGVsKSA+IE1hdGguYWJzKHlEZWwpICYmIE1hdGguYWJzKHhEZWwpID4gMSkge1xuICAgICAgICAgICAgbWF4ID0geERlbDtcbiAgICAgICAgICAgIG1pbiA9IHlEZWw7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGogPSBtYXggLyBNYXRoLmFicyhtYXgpOyBNYXRoLmFicyhqKSA8IE1hdGguYWJzKG1heCk7XG4gICAgICAgICAgICAgICAgaiArPSBtYXggLyBNYXRoLmFicyhtYXgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IE1hdGgucm91bmQobWluICogKE1hdGguYWJzKGopIC8gTWF0aC5hYnMobWF4KSkpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbk51bVMgPSAob2JqRGF0YS5wcmV2UG9pbnQueCArIGogKyBvYmpEYXRhLnByZXZQb2ludC55ICsgaSkgJSAyO1xuICAgICAgICAgICAgICAgIGlmIChldmVuTnVtUykge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEucHJpbWFyeUNvbG9yO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gb2JqRGF0YS5zZWNvbmRhcnlDb2xvcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxSZWN0KChvYmpEYXRhLnByZXZQb2ludC54ICsgaikgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAob2JqRGF0YS5wcmV2UG9pbnQueSArIGkpICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChNYXRoLmFicyh5RGVsKSA+IDEpIHtcbiAgICAgICAgICAgIG1heCA9IHlEZWw7XG4gICAgICAgICAgICBtaW4gPSB4RGVsO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbWF4IC8gTWF0aC5hYnMobWF4KTsgTWF0aC5hYnMoaSkgPCBNYXRoLmFicyhtYXgpO1xuICAgICAgICAgICAgICAgIGkgKz0gbWF4IC8gTWF0aC5hYnMobWF4KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGogPSBNYXRoLnJvdW5kKG1pbiAqIChNYXRoLmFicyhpKSAvIE1hdGguYWJzKG1heCkpKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW5OdW1TID0gKG9iakRhdGEucHJldlBvaW50LnggKyBqICsgb2JqRGF0YS5wcmV2UG9pbnQueSArIGkpICUgMjtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbk51bVMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBvYmpEYXRhLnByaW1hcnlDb2xvcjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEuc2Vjb25kYXJ5Q29sb3I7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdCgob2JqRGF0YS5wcmV2UG9pbnQueCArIGopICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKG9iakRhdGEucHJldlBvaW50LnkgKyBpKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSksIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2JqRGF0YS5wcmV2UG9pbnQueCA9IG51bUo7XG4gICAgb2JqRGF0YS5wcmV2UG9pbnQueSA9IG51bUk7XG59XG5cbmV4cG9ydCB7IG1vdmVEaXRoZXJpbmcgfTtcbiIsImltcG9ydCB7IHJnYjJoZXggfSBmcm9tICcuL3NpbXBsZUZ1bmN0aW9ucy9yZ2IyaGV4JztcblxuZnVuY3Rpb24gbW92ZWxpZ2h0ZW4ob2JqRGF0YSwgZXZlbnQpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gb2JqRGF0YS5jYW52YXNNYWluLmdldENvbnRleHQoJzJkJyk7XG4gICAgY29uc3QgbnVtSiA9IE1hdGguZmxvb3IoKGV2ZW50LnBhZ2VYIC0gb2JqRGF0YS5jb29yZHMubGVmdClcbiAgICAgICAgLyAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpKTtcbiAgICBjb25zdCBudW1JID0gTWF0aC5mbG9vcigoZXZlbnQucGFnZVkgLSBvYmpEYXRhLmNvb3Jkcy50b3ApXG4gICAgICAgIC8gKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSk7XG5cbiAgICBjb25zdCBjb2xvckNlbGwgPSBjb250ZXh0LmdldEltYWdlRGF0YShldmVudC5wYWdlWCAtIG9iakRhdGEuY29vcmRzLmxlZnQsXG4gICAgICAgIGV2ZW50LnBhZ2VZIC0gb2JqRGF0YS5jb29yZHMudG9wLCAxLCAxKS5kYXRhO1xuXG4gICAgY29uc3QgY29sb3JDZWxsQXJyYXkgPSBBcnJheS5mcm9tKGNvbG9yQ2VsbCk7XG4gICAgY29sb3JDZWxsQXJyYXkucG9wKCk7XG5cblxuICAgIGlmIChldmVudC5jdHJsS2V5KSB7XG4gICAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KC4uLmNvbG9yQ2VsbEFycmF5KTtcbiAgICAgICAgaWYgKG1heCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlbCA9IG1heDtcblxuICAgICAgICBjb25zdCBjb2xvck5ldyA9IGNvbG9yQ2VsbEFycmF5Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29sb3IgPSBpdGVtIC0gTWF0aC5jZWlsKDEwICogKGl0ZW0pIC8gZGVsKTtcbiAgICAgICAgICAgIGlmIChjb2xvciA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY29sb3JDZWxsSGV4ID0gcmdiMmhleCguLi5jb2xvck5ldyk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3JDZWxsSGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG1pbiA9IE1hdGgubWluKC4uLmNvbG9yQ2VsbEFycmF5KTtcbiAgICAgICAgaWYgKG1pbiA9PT0gMjU1KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVsID0gMjU1IC0gbWluO1xuXG4gICAgICAgIGNvbnN0IGNvbG9yTmV3ID0gY29sb3JDZWxsQXJyYXkubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IGl0ZW0gKyBNYXRoLmNlaWwoMTAgKiAoMjU1IC0gaXRlbSkgLyBkZWwpO1xuICAgICAgICAgICAgaWYgKGNvbG9yID4gMjU1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI1NTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY29sb3JDZWxsSGV4ID0gcmdiMmhleCguLi5jb2xvck5ldyk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3JDZWxsSGV4O1xuICAgIH1cblxuICAgIGNvbnRleHQuZmlsbFJlY3QobnVtSiAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgIG51bUkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xufVxuXG5leHBvcnQge21vdmVsaWdodGVufTtcbiIsIlxuXG5mdW5jdGlvbiBtb3ZlSW1nVG9NYWluQ2FudmFzKHJlYWxXaWR0aENhbnZhcykge1xuICAgIC8vIGNsZWFyIGNhbnZhc1xuICAgIGNvbnN0IGNhbnZhc01haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzTWFpbicpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhc01haW4uZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhc01haW4ud2lkdGgsIGNhbnZhc01haW4uaGVpZ2h0KTtcblxuICAgIGNvbnN0IHNlbGVjdGVkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkJyk7XG4gICAgY3R4LmRyYXdJbWFnZShzZWxlY3RlZEJ1dHRvbiwgMCwgMCwgcmVhbFdpZHRoQ2FudmFzLCByZWFsV2lkdGhDYW52YXMpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVTZWxlY3RlZChidXR0b24sIHJlYWxXaWR0aENhbnZhcykge1xuICAgIGNvbnN0IHNlbGVjdGVkQnV0dG9uID0gYnV0dG9uO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmICghc2VsZWN0ZWRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBjb25zdCBvbGRTZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZCcpO1xuICAgICAgICAgICAgb2xkU2VsZWN0ZWQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIHNlbGVjdGVkQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG5cbiAgICAgICAgICAgIG1vdmVJbWdUb01haW5DYW52YXMocmVhbFdpZHRoQ2FudmFzKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCB7IHRvZ2dsZVNlbGVjdGVkIH07XG4iLCJmdW5jdGlvbiBkcmF3RnJvbUNhbnZhcyhmcmFtZSkge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMtYW5pbWF0aW9uJyk7XG5cbiAgICBpZiAoY2FudmFzLmdldENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAgIGNvbnN0IGZyYW1lSW1nID0gZnJhbWUucXVlcnlTZWxlY3RvcignLmltZy1mcmFtZS1sZWZ0Jyk7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoZnJhbWVJbWcsIDAsIDAsIDE2MCwgMTYwKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7ZHJhd0Zyb21DYW52YXN9O1xuIiwiLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnRpbnVlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuLyogZXNsaW50LWVudiBicm93c2VyICovXG4vKiBqc2xpbnQtZW52IGJyb3dzZXIgKi9cbi8qIGdsb2JhbCB3aW5kb3cgKi9cbi8qIGdsb2JhbCBkb2N1bWVudCAqL1xuXG4vKlxuICogRHJhZ29uZmx5SlMgLSB2MS4yLjAgLSAyMDE4LTA3LTE3XG4gKiBodHRwczovL2dldGJ1dHRlcmZseS5jb20vZHJhZ29uZmx5anMtdmFuaWxsYS1qYXZhc2NyaXB0LWRyYWctYW5kLWRyb3AvXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggQ2lwcmlhbiBQb3Blc2N1XG4gKiBMaWNlbnNlZCBHUEx2M1xuICpcbiAqIGlNb3VzZURvd24gcmVwcmVzZW50cyB0aGUgY3VycmVudCBtb3VzZSBidXR0b24gc3RhdGU6IHVwIG9yIGRvd25cbiAqIGxNb3VzZVN0YXRlIHJlcHJlc2VudHMgdGhlIHByZXZpb3VzIG1vdXNlIGJ1dHRvbiBzdGF0ZSBzbyB0aGF0IHdlIGNhbiBjaGVjayBmb3IgYnV0dG9uXG4gKiAgY2xpY2tzIGFuZCBidXR0b24gcmVsZWFzZXM6XG4gKlxuICogaWYgKGlNb3VzZURvd24gJiYgIWxNb3VzZVN0YXRlKSB7fSAvLyBidXR0b24gY2xpY2tlZFxuICogaWYgKCFpTW91c2VEb3duICYmIGxNb3VzZVN0YXRlKSB7fSAvLyBidXR0b24gcmVsZWFzZWRcbiAqL1xubGV0IGlNb3VzZURvd24gPSBmYWxzZTtcbmxldCBsTW91c2VTdGF0ZSA9IGZhbHNlO1xubGV0IGRyYWdPYmplY3QgPSBudWxsO1xuXG5jb25zdCBEcmFnRHJvcHMgPSBbXTtcbmxldCBjdXJUYXJnZXQgPSBudWxsO1xubGV0IGxhc3RUYXJnZXQgPSBudWxsO1xubGV0IHJvb3RQYXJlbnQgPSBudWxsO1xubGV0IHJvb3RTaWJsaW5nID0gbnVsbDtcblxuLy8gTnVtYmVyLnByb3RvdHlwZS5OYU4wID0gZnVuY3Rpb24gKCkge1xuLy8gICAgIHJldHVybiBpc05hTih0aGlzKSA/IDAgOiB0aGlzO1xuLy8gfTtcblxuZnVuY3Rpb24gY3JlYXRlRHJhZ0NvbnRhaW5lcihlbGVtZW50KSB7XG4gICAgbGV0IGogPSAwO1xuICAgIGNvbnN0IGNEcmFnID0gRHJhZ0Ryb3BzLmxlbmd0aDtcblxuICAgIERyYWdEcm9wc1tjRHJhZ10gPSBbXTtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnRHJvcE9iaicsIGNEcmFnKTtcblxuICAgIERyYWdEcm9wc1tjRHJhZ10ucHVzaChlbGVtZW50KTtcblxuICAgIGZvciAoaiA9IDA7IGogPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuY2hpbGROb2Rlc1tqXS5ub2RlTmFtZSAhPT0gJyN0ZXh0Jykge1xuICAgICAgICAgICAgZWxlbWVudC5jaGlsZE5vZGVzW2pdLnNldEF0dHJpYnV0ZSgnRHJhZ09iaicsIGNEcmFnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0UG9zaXRpb24oZSkge1xuICAgIGxldCBsZWZ0ID0gMDtcbiAgICBsZXQgdG9wID0gMDtcblxuICAgIHdoaWxlIChlLm9mZnNldFBhcmVudCkge1xuICAgICAgICBsZWZ0ICs9IGUub2Zmc2V0TGVmdCArIChlLmN1cnJlbnRTdHlsZVxuICAgICAgICAgICAgPyAocGFyc2VJbnQoZS5jdXJyZW50U3R5bGUuYm9yZGVyTGVmdFdpZHRoLCAxMCkpLk5hTjAoKSA6IDApO1xuICAgICAgICB0b3AgKz0gZS5vZmZzZXRUb3AgKyAoZS5jdXJyZW50U3R5bGVcbiAgICAgICAgICAgID8gKHBhcnNlSW50KGUuY3VycmVudFN0eWxlLmJvcmRlclRvcFdpZHRoLCAxMCkpLk5hTjAoKSA6IDApO1xuICAgICAgICBlID0gZS5vZmZzZXRQYXJlbnQ7XG4gICAgfVxuXG4gICAgbGVmdCArPSBlLm9mZnNldExlZnQgKyAoZS5jdXJyZW50U3R5bGVcbiAgICAgICAgPyAocGFyc2VJbnQoZS5jdXJyZW50U3R5bGUuYm9yZGVyTGVmdFdpZHRoLCAxMCkpLk5hTjAoKSA6IDApO1xuICAgIHRvcCArPSBlLm9mZnNldFRvcCArIChlLmN1cnJlbnRTdHlsZVxuICAgICAgICA/IChwYXJzZUludChlLmN1cnJlbnRTdHlsZS5ib3JkZXJUb3BXaWR0aCwgMTApKS5OYU4wKCkgOiAwKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHg6IGxlZnQsXG4gICAgICAgIHk6IHRvcCxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtb3VzZUNvb3Jkcyhldikge1xuICAgIGlmIChldi5wYWdlWCB8fCBldi5wYWdlWSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogZXYucGFnZVgsXG4gICAgICAgICAgICB5OiBldi5wYWdlWSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB4OiBldi5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IC0gZG9jdW1lbnQuYm9keS5jbGllbnRMZWZ0LFxuICAgICAgICB5OiBldi5jbGllbnRZICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgLSBkb2N1bWVudC5ib2R5LmNsaWVudFRvcCxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtb3VzZU1vdmUoZXYpIHtcbiAgICBldiA9IGV2IHx8IHdpbmRvdy5ldmVudDtcblxuICAgIC8qXG4gICAgICogV2UgYXJlIHNldHRpbmcgdGFyZ2V0IHRvIHdoYXRldmVyIGl0ZW0gdGhlIG1vdXNlIGlzIGN1cnJlbnRseSBvblxuICAgICAqIEZpcmVmb3ggdXNlcyBldmVudC50YXJnZXQgaGVyZSwgTVNJRSB1c2VzIGV2ZW50LnNyY0VsZW1lbnRcbiAgICAgKi9cbiAgICBsZXQgZWxlbWVudEluc3RhbmNlO1xuICAgIGNvbnN0IGRyYWdIZWxwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJhZy1oZWxwZXInKTtcbiAgICBsZXQgYWN0aXZlQ29udCA9IG51bGw7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXYudGFyZ2V0IHx8IGV2LnNyY0VsZW1lbnQ7XG4gICAgY29uc3QgbW91c2VQb3MgPSBtb3VzZUNvb3Jkcyhldik7XG4gICAgbGV0IG9yaWdDbGFzcztcbiAgICBsZXQgZHJhZ0NvbnRzO1xuICAgIGxldCBwb3M7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG5cbiAgICAvLyBtb3VzZU91dCBldmVudCAtIGZpcmVzIGlmIHRoZSBpdGVtIHRoZSBtb3VzZSBpcyBvbiBoYXMgY2hhbmdlZFxuICAgIGlmIChsYXN0VGFyZ2V0ICYmICh0YXJnZXQgIT09IGxhc3RUYXJnZXQpKSB7XG4gICAgICAgIC8vIFJlc2V0IHRoZSBjbGFzc25hbWUgZm9yIHRoZSB0YXJnZXQgZWxlbWVudFxuICAgICAgICBvcmlnQ2xhc3MgPSBsYXN0VGFyZ2V0LmdldEF0dHJpYnV0ZSgnb3JpZ0NsYXNzJyk7XG4gICAgICAgIGlmIChvcmlnQ2xhc3MpIHtcbiAgICAgICAgICAgIGxhc3RUYXJnZXQuY2xhc3NOYW1lID0gb3JpZ0NsYXNzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBkcmFnT2JqIGlzIHRoZSBncm91cGluZyB0aGUgaXRlbSBpcyBpbiAoc2V0IGZyb20gdGhlIGNyZWF0ZURyYWdDb250YWluZXIgZnVuY3Rpb24pXG4gICAgICogaWYgdGhlIGl0ZW0gaXMgbm90IGluIGEgZ3JvdXBpbmcgd2UgaWdub3JlIGl0IHNpbmNlIGl0IGNhbid0IGJlIGRyYWdnZWQgd2l0aCB0aGlzIHNjcmlwdFxuICAgICAqL1xuICAgIGNvbnN0IGRyYWdPYmogPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdEcmFnT2JqJyk7XG5cbiAgICAvLyBJZiB0aGUgbW91c2Ugd2FzIG1vdmVkIG92ZXIgYW4gZWxlbWVudCB0aGF0IGlzIGRyYWdnYWJsZVxuICAgIGlmIChkcmFnT2JqICE9PSBudWxsKSB7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIGp1c3Qgc3RhcnRpbmcgdG8gZHJhZyB0aGUgZWxlbWVudFxuICAgICAgICBpZiAoaU1vdXNlRG93biAmJiAhbE1vdXNlU3RhdGUpIHtcbiAgICAgICAgICAgIC8vIG1vdXNlRG93biB0YXJnZXRcbiAgICAgICAgICAgIGN1clRhcmdldCA9IHRhcmdldDtcblxuICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBtb3VzZSB4IGFuZCB5IG9mZnNldCBmb3IgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgIHJvb3RQYXJlbnQgPSBjdXJUYXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHJvb3RTaWJsaW5nID0gY3VyVGFyZ2V0Lm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgYW55dGhpbmcgdGhhdCBpcyBpbiB0aGUgZHJhZ0hlbHBlciBkaXYgc28gd2UgY2FuIHB1dCBhIG5ldyBpdGVtIGluIGl0XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZHJhZ0hlbHBlci5jaGlsZE5vZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgZHJhZ0hlbHBlci5yZW1vdmVDaGlsZChkcmFnSGVscGVyLmNoaWxkTm9kZXNbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYWtlIGEgY29weSBvZiB0aGUgY3VycmVudCBpdGVtIGFuZCBwdXQgaXQgaW4gdGhlIGRyYWcgaGVscGVyXG4gICAgICAgICAgICBkcmFnSGVscGVyLmFwcGVuZENoaWxkKGN1clRhcmdldC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgZHJhZ0hlbHBlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICAgICAgLy8gU2V0IHRoZSBjbGFzcyBvbiB0aGUgaGVscGVyIGRpdiBpZiBuZWNlc3NhcnlcbiAgICAgICAgICAgIGRyYWdIZWxwZXIuY2xhc3NMaXN0LmFkZCgnZHJhZy1ib3gtZHJhZ2dpbmcnKTtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSBkcmFnZ2luZyBmcm9tIHRoZSBoZWxwZXIgZGl2IChpdCdzIGFscmVhZHkgYmVpbmcgZHJhZ2dlZClcbiAgICAgICAgICAgIGRyYWdIZWxwZXIuZmlyc3RDaGlsZC5yZW1vdmVBdHRyaWJ1dGUoJ0RyYWdPYmonKTtcblxuICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIGFsbCBkcmFnL2Ryb3AgdGFyZ2V0cyByZWxhdGVkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAgICBkcmFnQ29udHMgPSBEcmFnRHJvcHNbZHJhZ09ial07XG5cbiAgICAgICAgICAgIGN1clRhcmdldC5zZXRBdHRyaWJ1dGUoJ3N0YXJ0V2lkdGgnLCBwYXJzZUludChjdXJUYXJnZXQub2Zmc2V0V2lkdGgsIDEwKSk7XG4gICAgICAgICAgICBjdXJUYXJnZXQuc2V0QXR0cmlidXRlKCdzdGFydEhlaWdodCcsIHBhcnNlSW50KGN1clRhcmdldC5vZmZzZXRIZWlnaHQsIDEwKSk7XG4gICAgICAgICAgICBjdXJUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggcG9zc2libGUgZHJvcCBjb250YWluZXJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkcmFnQ29udHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50SW5zdGFuY2UgPSBkcmFnQ29udHNbaV07XG5cbiAgICAgICAgICAgICAgICBwb3MgPSBnZXRQb3NpdGlvbihkcmFnQ29udHNbaV0pO1xuXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgd2lkdGgsIGhlaWdodCBhbmQgcG9zaXRpb24gb2YgZWFjaCBjb250YWluZXJcbiAgICAgICAgICAgICAgICBlbGVtZW50SW5zdGFuY2Uuc2V0QXR0cmlidXRlKCdzdGFydFdpZHRoJywgcGFyc2VJbnQoZWxlbWVudEluc3RhbmNlLm9mZnNldFdpZHRoLCAxMCkpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRJbnN0YW5jZS5zZXRBdHRyaWJ1dGUoJ3N0YXJ0SGVpZ2h0JywgcGFyc2VJbnQoZWxlbWVudEluc3RhbmNlLm9mZnNldEhlaWdodCwgMTApKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50SW5zdGFuY2Uuc2V0QXR0cmlidXRlKCdzdGFydExlZnQnLCBwb3MueCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudEluc3RhbmNlLnNldEF0dHJpYnV0ZSgnc3RhcnRUb3AnLCBwb3MueSk7XG5cbiAgICAgICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBjaGlsZCBlbGVtZW50IG9mIGVhY2ggY29udGFpbmVyXG4gICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGRyYWdDb250c1tpXS5jaGlsZE5vZGVzLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRJbnN0YW5jZSA9IGRyYWdDb250c1tpXS5jaGlsZE5vZGVzW2pdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZWxlbWVudEluc3RhbmNlLm5vZGVOYW1lID09PSAnI3RleHQnKSB8fCAoZHJhZ0NvbnRzW2ldLmNoaWxkTm9kZXNbal0gPT09IGN1clRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcG9zID0gZ2V0UG9zaXRpb24oZHJhZ0NvbnRzW2ldLmNoaWxkTm9kZXNbal0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIHdpZHRoLCBoZWlnaHQgYW5kIHBvc2l0aW9uIG9mIGVhY2ggZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50SW5zdGFuY2Uuc2V0QXR0cmlidXRlKCdzdGFydFdpZHRoJywgcGFyc2VJbnQoZWxlbWVudEluc3RhbmNlLm9mZnNldFdpZHRoLCAxMCkpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50SW5zdGFuY2Uuc2V0QXR0cmlidXRlKCdzdGFydEhlaWdodCcsIHBhcnNlSW50KGVsZW1lbnRJbnN0YW5jZS5vZmZzZXRIZWlnaHQsIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRJbnN0YW5jZS5zZXRBdHRyaWJ1dGUoJ3N0YXJ0TGVmdCcsIHBvcy54KTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudEluc3RhbmNlLnNldEF0dHJpYnV0ZSgnc3RhcnRUb3AnLCBwb3MueSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgZ2V0IGluIGhlcmUgd2UgYXJlIGRyYWdnaW5nIHNvbWV0aGluZ1xuICAgIGlmIChjdXJUYXJnZXQpIHtcbiAgICAgICAgLy8gTW92ZSBoZWxwZXIgZGl2IHRvIHdoZXJldmVyIHRoZSBtb3VzZSBpc1xuICAgICAgICBkcmFnSGVscGVyLnN0eWxlLnRvcCA9IGAke21vdXNlUG9zLnl9cHhgO1xuICAgICAgICBkcmFnSGVscGVyLnN0eWxlLmxlZnQgPSBgJHttb3VzZVBvcy54fXB4YDtcblxuICAgICAgICBkcmFnQ29udHMgPSBEcmFnRHJvcHNbY3VyVGFyZ2V0LmdldEF0dHJpYnV0ZSgnRHJhZ09iaicpXTtcblxuICAgICAgICBjb25zdCB4UG9zID0gbW91c2VQb3MueCArIChwYXJzZUludChjdXJUYXJnZXQuZ2V0QXR0cmlidXRlKCdzdGFydFdpZHRoJyksIDEwKSAvIDIpO1xuICAgICAgICBjb25zdCB5UG9zID0gbW91c2VQb3MueSArIChwYXJzZUludChjdXJUYXJnZXQuZ2V0QXR0cmlidXRlKCdzdGFydEhlaWdodCcpLCAxMCkgLyAyKTtcblxuICAgICAgICAvLyBDaGVjayBlYWNoIGRyb3AgY29udGFpbmVyIHRvIHNlZSBpZiB0YXJnZXQgb2JqZWN0IGlzIFwiaW5zaWRlXCIgdGhlIGNvbnRhaW5lclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZHJhZ0NvbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBhY3RpdmVDb250ID0gZHJhZ0NvbnRzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYmVmb3JlTm9kZSB3aWxsIGhvbGQgdGhlIGZpcnN0IG5vZGUgQUZURVIgd2hlcmUgZGl2IGJlbG9uZ3NcbiAgICAgICAgbGV0IGJlZm9yZU5vZGUgPSBudWxsO1xuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGNoaWxkIG5vZGUgKHNraXBwaW5nIHRleHQgbm9kZXMpXG4gICAgICAgIGZvciAoaSA9IGFjdGl2ZUNvbnQuY2hpbGROb2Rlcy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgZWxlbWVudEluc3RhbmNlID0gYWN0aXZlQ29udC5jaGlsZE5vZGVzW2ldO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudEluc3RhbmNlLm5vZGVOYW1lID09PSAnI3RleHQnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGl0ZW0gaXMgXCJBZnRlclwiIHRoZSBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgICAgICAgICAgIGlmIChjdXJUYXJnZXQgIT09IGFjdGl2ZUNvbnQuY2hpbGROb2Rlc1tpXSAmJiAoKHBhcnNlSW50KGVsZW1lbnRJbnN0YW5jZS5nZXRBdHRyaWJ1dGUoJ3N0YXJ0TGVmdCcpLCAxMCkgKyBwYXJzZUludChlbGVtZW50SW5zdGFuY2UuZ2V0QXR0cmlidXRlKCdzdGFydFdpZHRoJyksIDEwKSkgPiB4UG9zKSAmJiAoKHBhcnNlSW50KGVsZW1lbnRJbnN0YW5jZS5nZXRBdHRyaWJ1dGUoJ3N0YXJ0VG9wJyksIDEwKSArIHBhcnNlSW50KGVsZW1lbnRJbnN0YW5jZS5nZXRBdHRyaWJ1dGUoJ3N0YXJ0SGVpZ2h0JyksIDEwKSkgPiB5UG9zKSkge1xuICAgICAgICAgICAgICAgIGJlZm9yZU5vZGUgPSBhY3RpdmVDb250LmNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgaXRlbSBiZWluZyBkcmFnZ2VkIGJlbG9uZ3MgYmVmb3JlIGFub3RoZXIgaXRlbVxuICAgICAgICBpZiAoYmVmb3JlTm9kZSkge1xuICAgICAgICAgICAgaWYgKGJlZm9yZU5vZGUgIT09IGN1clRhcmdldC5uZXh0U2libGluZykge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUNvbnQuaW5zZXJ0QmVmb3JlKGN1clRhcmdldCwgYmVmb3JlTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGUgaXRlbSBiZWluZyBkcmFnZ2VkIGJlbG9uZ3MgYXQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBjb250YWluZXJcbiAgICAgICAgfSBlbHNlIGlmICgoY3VyVGFyZ2V0Lm5leHRTaWJsaW5nKSB8fCAoY3VyVGFyZ2V0LnBhcmVudE5vZGUgIT09IGFjdGl2ZUNvbnQpKSB7XG4gICAgICAgICAgICBhY3RpdmVDb250LmFwcGVuZENoaWxkKGN1clRhcmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYWtlIGRyYWcgaXRlbSB2aXNpYmxlXG4gICAgICAgIGlmIChjdXJUYXJnZXQuc3R5bGUuZGlzcGxheSAhPT0gJycpIHtcbiAgICAgICAgICAgIGN1clRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICBjdXJUYXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgdGhlIGN1cnJlbnQgbW91c2Ugc3RhdGUgc28gd2UgY2FuIGNvbXBhcmUgYWdhaW5zdCBpdCBuZXh0IHRpbWVcbiAgICBsTW91c2VTdGF0ZSA9IGlNb3VzZURvd247XG5cbiAgICAvLyBtb3VzZU1vdmUgdGFyZ2V0XG4gICAgbGFzdFRhcmdldCA9IHRhcmdldDtcblxuICAgIGlmIChkcmFnT2JqZWN0KSB7XG4gICAgICAgIGRyYWdPYmplY3Quc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBkcmFnT2JqZWN0LnN0eWxlLnRvcCA9IG1vdXNlUG9zLnk7XG4gICAgICAgIGRyYWdPYmplY3Quc3R5bGUubGVmdCA9IG1vdXNlUG9zLng7XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgdGhlIGN1cnJlbnQgbW91c2Ugc3RhdGUgc28gd2UgY2FuIGNvbXBhcmUgYWdhaW5zdCBpdCBuZXh0IHRpbWVcbiAgICBsTW91c2VTdGF0ZSA9IGlNb3VzZURvd247XG5cbiAgICAvLyBQcmV2ZW50IGl0ZW1zIG9uIHRoZSBwYWdlIGZyb20gYmVpbmcgaGlnaGxpZ2h0ZWQgd2hpbGUgZHJhZ2dpbmdcbiAgICBpZiAoY3VyVGFyZ2V0IHx8IGRyYWdPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW91c2VVcCgpIHtcbiAgICBjb25zdCBkcmFnSGVscGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyYWctaGVscGVyJyk7XG5cbiAgICBpZiAoY3VyVGFyZ2V0KSB7XG4gICAgICAgIGRyYWdIZWxwZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICBpZiAoY3VyVGFyZ2V0LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgaWYgKHJvb3RTaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgcm9vdFBhcmVudC5pbnNlcnRCZWZvcmUoY3VyVGFyZ2V0LCByb290U2libGluZyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJvb3RQYXJlbnQuYXBwZW5kQ2hpbGQoY3VyVGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICBjdXJUYXJnZXQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICB9XG4gICAgY3VyVGFyZ2V0ID0gbnVsbDtcbiAgICBkcmFnT2JqZWN0ID0gbnVsbDtcbiAgICBpTW91c2VEb3duID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG1vdXNlRG93bihldikge1xuICAgIGV2ID0gZXYgfHwgd2luZG93LmV2ZW50O1xuICAgIGNvbnN0IHRhcmdldCA9IGV2LnRhcmdldCB8fCBldi5zcmNFbGVtZW50O1xuXG4gICAgaU1vdXNlRG93biA9IHRydWU7XG5cbiAgICBpZiAodGFyZ2V0Lm9ubW91c2Vkb3duIHx8IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ0RyYWdPYmonKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFnb25mbHkoZWxlbWVudCwgYXJyRnJhbWVzKSB7XG4gICAgY3JlYXRlRHJhZ0NvbnRhaW5lcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpKTtcblxuICAgIGNvbnN0IGRyYWdIZWxwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkcmFnSGVscGVyLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IGFic29sdXRlOyBkaXNwbGF5OiBub25lOyc7XG4gICAgZHJhZ0hlbHBlci5jbGFzc0xpc3QuYWRkKCdkcmFnLWhlbHBlcicpO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkcmFnSGVscGVyKTtcblxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKCkgPT4ge1xuICAgICAgICBtb3VzZU1vdmUoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKSA9PiB7XG4gICAgICAgIG1vdXNlRG93bigpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7XG4gICAgICAgIG1vdXNlVXAoYXJyRnJhbWVzKTtcblxuICAgICAgICBhcnJGcmFtZXMubGVuZ3RoID0gMDtcbiAgICAgICAgY29uc3QgZWxlbWVudDEgPSAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmltZ3MtYmxvY2snKSk7XG4gICAgICAgIGNvbnN0IGFyciA9IChlbGVtZW50MS5xdWVyeVNlbGVjdG9yQWxsKCcuaW1nLXdyYXAnKSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyckZyYW1lc1tpXSA9IGFycltpXTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5leHBvcnQge2RyYWdvbmZseX07XG4iLCJpbXBvcnQgeyB0b2dnbGVTZWxlY3RlZCB9IGZyb20gJy4vdG9nZ2xlU2VsZWN0ZWQnO1xuaW1wb3J0IHsgZHJhd0Zyb21DYW52YXMgfSBmcm9tICcuLi9hbmltYXRpb25zL2RyYXdGcm9tQ2FudmFzJztcbmltcG9ydCB7IGRyYWdvbmZseSB9IGZyb20gJy4uLy4uL3V0aWxzL2RyYWdvbmZseSc7XG5cbmZ1bmN0aW9uIGNyZWF0ZU5ld0ZyYW1lKG9iakRhdGEsIGV4aXN0aW5nRnJhbWUpIHtcbiAgICBsZXQgbmV3SW1nO1xuICAgIGNvbnN0IGN0eCA9IG9iakRhdGEuY2FudmFzTWFpbi5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgb2JqRGF0YS5jYW52YXNNYWluLndpZHRoLCBvYmpEYXRhLmNhbnZhc01haW4uaGVpZ2h0KTtcbiAgICAvLyBjcmVhdGUgbmV3IGltZ1xuICAgIGlmIChleGlzdGluZ0ZyYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIG5ld0ltZy5jbGFzc05hbWUgPSAnaW1nLWZyYW1lLWxlZnQnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZyYW1lRWxDbG9uZSA9IGV4aXN0aW5nRnJhbWUucXVlcnlTZWxlY3RvcignLmltZy1mcmFtZS1sZWZ0Jyk7XG4gICAgICAgIGNvbnN0IGltZ0ZyYW1lRWxDbG9uZSA9IGZyYW1lRWxDbG9uZS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgbmV3SW1nID0gaW1nRnJhbWVFbENsb25lO1xuICAgICAgICBuZXdJbWcuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBmcmFtZXNJbWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZyYW1lcy1pbWdzJyk7XG5cbiAgICAvLyBjcmVhdGUgd3JhcCBmb3IgaW1nXG4gICAgY29uc3QgZnJhbWVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZnJhbWVXcmFwLmNsYXNzTmFtZSA9ICdpbWctd3JhcCc7XG4gICAgZnJhbWVXcmFwLmlubmVySFRNTCA9ICdtb3ZlJztcblxuICAgIC8vIGNyZWF0ZSBidXR0b24gdG8gZGVsZXRlIGZyYW1lXG4gICAgY29uc3QgYnV0dG9uRGVsZXRlRnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBidXR0b25EZWxldGVGcmFtZS5pbm5lckhUTUwgPSAnZGVsJztcbiAgICBidXR0b25EZWxldGVGcmFtZS5jbGFzc05hbWUgPSAnZGVsZXRlLWZyYW1lJztcbiAgICBidXR0b25EZWxldGVGcmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgLy8gaWYgZGVsZXRlIGxhc3QgZnJhbWUgLSBjcmVhdGUgZXJyb3JcbiAgICAgICAgaWYgKG9iakRhdGEuYXJyRnJhbWVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgYWxlcnQoJ2NhbiBub3QgZGVsZXRlIGxhc3QgZnJhbWUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGRlbGV0ZSBzZWxlY3RlZCBmcmFtZSAtIGdvIHRvIHRoZSBmaXJzdFxuICAgICAgICBpZiAobmV3SW1nLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW1nLWZyYW1lLWxlZnQnKTtcbiAgICAgICAgICAgIHRvZ2dsZVNlbGVjdGVkKGZpcnN0SW1nLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcykoKTtcbiAgICAgICAgfVxuICAgICAgICBmcmFtZVdyYXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmcmFtZVdyYXApO1xuXG4gICAgICAgIC8vIGFuZCBkZWxldGUgZnJvbSBhcnJheVxuICAgICAgICAvLyBsb29rIGZvciBpbmRleCBpbiBhcnJheVxuICAgICAgICBjb25zdCBpbmRleCA9IG9iakRhdGEuYXJyRnJhbWVzLmluZGV4T2YoZnJhbWVXcmFwKTtcbiAgICAgICAgb2JqRGF0YS5hcnJGcmFtZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9KTtcblxuICAgIC8vIGNyZWF0ZSBidXR0b24gdG8gY29weSBmcmFtZVxuICAgIGNvbnN0IGJ1dHRvbkNvcHlGcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbkNvcHlGcmFtZS5pbm5lckhUTUwgPSAnY29weSc7XG4gICAgYnV0dG9uQ29weUZyYW1lLmNsYXNzTmFtZSA9ICdjb3B5LWZyYW1lJztcbiAgICBidXR0b25Db3B5RnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIC8vIGlmIGRlbGV0ZSBzZWxlY3RlZCBmcmFtZSAtIGdvIHRvIHRoZSBmaXJzdFxuICAgICAgICBjcmVhdGVOZXdGcmFtZShvYmpEYXRhLCBmcmFtZVdyYXApO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYnV0dG9uSW1nc1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidXR0b25JbWdzV3JhcHBlci5jbGFzc05hbWUgPSAnYnV0LWltZy13cmFwJztcbiAgICBidXR0b25JbWdzV3JhcHBlci5hcHBlbmRDaGlsZChidXR0b25EZWxldGVGcmFtZSk7XG4gICAgYnV0dG9uSW1nc1dyYXBwZXIuYXBwZW5kQ2hpbGQoYnV0dG9uQ29weUZyYW1lKTtcblxuICAgIGZyYW1lV3JhcC5hcHBlbmRDaGlsZChuZXdJbWcpO1xuICAgIGZyYW1lV3JhcC5hcHBlbmRDaGlsZChidXR0b25JbWdzV3JhcHBlcik7XG4gICAgZnJhbWVzSW1ncy5hcHBlbmRDaGlsZChmcmFtZVdyYXApO1xuXG4gICAgdG9nZ2xlU2VsZWN0ZWQobmV3SW1nLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcykoKTtcbiAgICBuZXdJbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTZWxlY3RlZChuZXdJbWcsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzKSk7XG4gICAgb2JqRGF0YS5hcnJGcmFtZXMucHVzaChmcmFtZVdyYXApO1xuXG4gICAgY2xlYXJJbnRlcnZhbChvYmpEYXRhLmludGVydmFsKTtcbiAgICBvYmpEYXRhLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBjb25zdCBmcmFtZSA9IG9iakRhdGEuYXJyRnJhbWVzW29iakRhdGEuY291bnRGcmFtZXMgJSBvYmpEYXRhLmFyckZyYW1lcy5sZW5ndGhdO1xuICAgICAgICBkcmF3RnJvbUNhbnZhcyhmcmFtZSk7XG4gICAgICAgIG9iakRhdGEuY291bnRGcmFtZXMgKz0gMTtcbiAgICB9LCAxMDAwIC8gb2JqRGF0YS5udW1GUFMpO1xuXG5cbiAgICBkcmFnb25mbHkoJy5mcmFtZXMtaW1ncycsIG9iakRhdGEuYXJyRnJhbWVzKTtcbn1cblxuZXhwb3J0IHtjcmVhdGVOZXdGcmFtZX07XG4iLCIvLyBmdWxsc2NyZWVuIG1vZGVcblxuZG9jdW1lbnQuY2FuY2VsRnVsbFNjcmVlbiA9IGRvY3VtZW50LmNhbmNlbEZ1bGxTY3JlZW4gfHwgZG9jdW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlbjtcbmZ1bmN0aW9uIGVudGVyRnVsbHNjcmVlbihpZCkge1xuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuXG4gICAgaWYgKGVsLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKSB7XG4gICAgICAgIGVsLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKEVsZW1lbnQuQUxMT1dfS0VZQk9BUkRfSU5QVVQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbi1mdWxsU2NyZWVuJykub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgZXhpdEZ1bGxzY3JlZW4oaWQpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGV4aXRGdWxsc2NyZWVuKGlkKSB7XG4gICAgZG9jdW1lbnQuY2FuY2VsRnVsbFNjcmVlbigpO1xuXG4gICAgLy8gbGV0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbi1mdWxsU2NyZWVuJykub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgZW50ZXJGdWxsc2NyZWVuKGlkKTtcbiAgICB9O1xufVxuXG5cbmV4cG9ydCB7ZW50ZXJGdWxsc2NyZWVuLCBleGl0RnVsbHNjcmVlbn07XG4vLyBtb2R1bGUuZXhwb3J0cyA9IHtlbnRlckZ1bGxzY3JlZW4sIGV4aXRGdWxsc2NyZWVufTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXG5cbmltcG9ydCB7IE9ialRvb2xzIH0gZnJvbSAnLi9jb21wb25lbnRzL3Rvb2xzL29ialRvb2xzJztcbmltcG9ydCB7IGFycktleXMgfSBmcm9tICcuL2NvbXBvbmVudHMvdG9vbHMvYXJyS2V5cyc7XG5pbXBvcnQgeyBjcmVhdGVNb2RhbFdpbmRvdyB9IGZyb20gJy4vY29tcG9uZW50cy90b29scy9jcmVhdGVNb2RhbFdpbmRvdyc7XG5pbXBvcnQgeyBjcmVhdGVNYWluQ2FudmFzRXZlbnRMaXN0ZW5lciB9IGZyb20gJy4vY29tcG9uZW50cy9tYWluQ2FudmFzL2NyZWF0ZU1haW5DYW52YXNFdmVudExpc3RlbmVyJztcbmltcG9ydCB7IGV2ZW50TGlzdGVuZXJGcmFtZXMgfSBmcm9tICcuL2NvbXBvbmVudHMvZnJhbWVzL2V2ZW50TGlzdGVuZXJGcmFtZXMnO1xuaW1wb3J0IHsgY3JlYXRlVG9vbHNMaXN0ZW5lciB9IGZyb20gJy4vY29tcG9uZW50cy90b29scy9jcmVhdGVUb29sc0xpc3RlbmVyJztcbmltcG9ydCB7IHJlc2l6ZUZyYW1lcyB9IGZyb20gJy4vY29tcG9uZW50cy9vdGhlckJ1dHRvbnMvcmVzaXplRnJhbWVzJztcbmltcG9ydCB7IGNyZWF0ZUludGVydmFsIH0gZnJvbSAnLi9jb21wb25lbnRzL2FuaW1hdGlvbnMvY3JlYXRlSW50ZXJ2YWwnO1xuaW1wb3J0IHsgYWRkRnVsbHNjcmVlbkV2ZW50IH0gZnJvbSAnLi91dGlscy9hZGRGdWxsc2NyZWVuRXZlbnQnO1xuaW1wb3J0IHsgYWRkQ2hhbmdlRlBTZXZlbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvYW5pbWF0aW9ucy9hZGRDaGFuZ2VGUFNldmVudCc7XG5cbi8vIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuY29uc3QgcmV0T2JqID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb2JqZWN0JykpO1xuY29uc29sZS5sb2cocmV0T2JqKTtcblxuY29uc3Qgb2JqRGF0YSA9IHt9O1xub2JqRGF0YS5udW1GUFMgPSAxO1xub2JqRGF0YS5jb3VudEZyYW1lcyA9IDA7XG5vYmpEYXRhLnNlbGVjdGVkVG9vbCA9IE9ialRvb2xzLnBlbjtcblxub2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgPSAzMjA7XG5vYmpEYXRhLndpZHRoRnJhbWUgPSAzMjtcbm9iakRhdGEuYXJyRnJhbWVzID0gW107XG5vYmpEYXRhLnByZXZQb2ludCA9IHt9O1xub2JqRGF0YS5jYW52YXNNYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhc01haW4nKTtcbm9iakRhdGEuY29vcmRzID0gb2JqRGF0YS5jYW52YXNNYWluLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xub2JqRGF0YS5jb250ZXh0ID0gb2JqRGF0YS5jYW52YXNNYWluLmdldENvbnRleHQoJzJkJyk7XG5vYmpEYXRhLnBvaW50Q2xpY2sgPSB7fTtcbm9iakRhdGEuYXJyS2V5cyA9IGFycktleXM7XG5cblxuYWRkQ2hhbmdlRlBTZXZlbnQob2JqRGF0YSk7XG5cbmFkZEZ1bGxzY3JlZW5FdmVudCgpO1xuXG5jcmVhdGVNb2RhbFdpbmRvdyhvYmpEYXRhKTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbmNyZWF0ZU1haW5DYW52YXNFdmVudExpc3RlbmVyKG9iakRhdGEpO1xuXG5jcmVhdGVJbnRlcnZhbChvYmpEYXRhKTtcblxuZXZlbnRMaXN0ZW5lckZyYW1lcyhvYmpEYXRhKTtcblxuY3JlYXRlVG9vbHNMaXN0ZW5lcihvYmpEYXRhKTtcblxucmVzaXplRnJhbWVzKG9iakRhdGEpO1xuXG5cbnNldEludGVydmFsKCgpID0+IHtcbiAgICBjb25zdCBzT2JqID0gSlNPTi5zdHJpbmdpZnkob2JqRGF0YSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29iamVjdCcsIHNPYmopO1xufSwgNTAwMCk7XG4iLCJpbXBvcnQgeyBjaGFuZ2VGUFMgfSBmcm9tICcuL2NoYW5nZUZQUyc7XG5cbmZ1bmN0aW9uIGFkZENoYW5nZUZQU2V2ZW50KG9iakRhdGEpIHtcbiAgICAvLyAgaHRtbCBldmVudCBsaW5lRlBTXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmVGUFMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY2hhbmdlRlBTKG9iakRhdGEsIG9iakRhdGEuYXJyRnJhbWVzKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IHsgYWRkQ2hhbmdlRlBTZXZlbnQgfTtcbiIsImltcG9ydCB7IGRyYXdGcm9tQ2FudmFzIH0gZnJvbSAnLi9kcmF3RnJvbUNhbnZhcyc7XG5cblxuLy8gbGluZSBmcHNcbmZ1bmN0aW9uIGNoYW5nZUZQUyhvYmpEYXRhLCBhcnJGcmFtZXMpIHtcbiAgICBjb25zdCBsaW5lRlBTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmVGUFMnKS52YWx1ZTtcbiAgICBjb25zdCBkaXNwbGF5RlBTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlGUFMnKTtcbiAgICBkaXNwbGF5RlBTLmlubmVySFRNTCA9IGAke2xpbmVGUFN9IEZQU2A7XG5cbiAgICBvYmpEYXRhLm51bUZQUyA9IGxpbmVGUFM7XG5cbiAgICBjbGVhckludGVydmFsKG9iakRhdGEuaW50ZXJ2YWwpO1xuICAgIG9iakRhdGEuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZyYW1lID0gYXJyRnJhbWVzW29iakRhdGEuY291bnRGcmFtZXMgJSBhcnJGcmFtZXMubGVuZ3RoXTtcblxuICAgICAgICBkcmF3RnJvbUNhbnZhcyhmcmFtZSk7XG4gICAgICAgIG9iakRhdGEuY291bnRGcmFtZXMgKz0gMTtcbiAgICB9LCAxMDAwIC8gb2JqRGF0YS5udW1GUFMpO1xufVxuXG5leHBvcnQge2NoYW5nZUZQU307XG4iLCJpbXBvcnQgeyBlbnRlckZ1bGxzY3JlZW4gfSBmcm9tICcuL2Z1bGxzY3JlZW4nO1xuXG5mdW5jdGlvbiBhZGRGdWxsc2NyZWVuRXZlbnQoKSB7XG4gICAgLy8gZnVsbHNjcmVlbiBtb2RlXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbi1mdWxsU2NyZWVuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGVudGVyRnVsbHNjcmVlbignY2FudmFzLWFuaW1hdGlvbicpO1xuICAgIH0pO1xufVxuXG5leHBvcnQge2FkZEZ1bGxzY3JlZW5FdmVudH07XG4iLCJpbXBvcnQgeyBzZWxlY3RUaGlzVG9vbCB9IGZyb20gJy4vc2VsZWN0VGhpc1Rvb2wnO1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZU1vZGFsV2luZG93KG9iakRhdGEpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU1vZGFsJyk7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215QnRuJyk7XG4gICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Nsb3NlJylbMF07XG4gICAgYnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH07XG4gICAgc3Bhbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH07XG4gICAgd2luZG93Lm9uY2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gbW9kYWwpIHtcbiAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGtleWJvYXJkU2hvcnRjdXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgna2V5LWljb24nKTtcblxuICAgIEFycmF5LmZyb20oa2V5Ym9hcmRTaG9ydGN1dHMpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2tleS1pY29uJykpIHtcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQta2V5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCBtb2RhbEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215TW9kYWwnKTtcblxuICAgICAgICBpZiAobW9kYWxFbC5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snKSB7XG4gICAgICAgICAgICBjb25zdCBlbCA9IG1vZGFsRWwucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLWtleScpO1xuICAgICAgICAgICAgaWYgKGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iakRhdGEuYXJyS2V5c1tlLmtleUNvZGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCd0aGlzIGtleSBpcyBhbHJlYWR5IHJlc2VydmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkLWtleScpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2wgPSBvYmpEYXRhLmFycktleXNbZWwucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTC5jaGFyQ29kZUF0KDApXTtcbiAgICAgICAgICAgICAgICBvYmpEYXRhLmFycktleXNbZWwucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTC5jaGFyQ29kZUF0KDApXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqRGF0YS5hcnJLZXlzW2Uua2V5Q29kZV0gPSB0b29sO1xuICAgICAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZSk7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQta2V5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9iakRhdGEuYXJyS2V5c1tlLmtleUNvZGVdKSB7XG4gICAgICAgICAgICBzZWxlY3RUaGlzVG9vbChvYmpEYXRhLmFycktleXNbZS5rZXlDb2RlXSwgb2JqRGF0YSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG5leHBvcnQgeyBjcmVhdGVNb2RhbFdpbmRvdyB9O1xuIiwiaW1wb3J0IHsgbW92ZVBlbiB9IGZyb20gJy4vbW92ZVBlbic7XG5pbXBvcnQgeyBwZW5PdXRPZkNhbnZhcyB9IGZyb20gJy4vcGVuT3V0T2ZDYW52YXMnO1xuaW1wb3J0IHsgbW91c2V1cE91dE9mQ2FudmFzIH0gZnJvbSAnLi9tb3VzZXVwT3V0T2ZDYW52YXMnO1xuaW1wb3J0IHsgT2JqVG9vbHMgfSBmcm9tICcuLi90b29scy9vYmpUb29scyc7XG5pbXBvcnQgeyBtb3ZlTWlycm9yUGVuIH0gZnJvbSAnLi9tb3ZlTWlycm9yUGVuJztcbmltcG9ydCB7IG1vdmVTdHJva2UgfSBmcm9tICcuL21vdmVTdHJva2UnO1xuaW1wb3J0IHsgcGFpbnRCdWNrZXQgfSBmcm9tICcuL3BhaW50QnVja2V0JztcbmltcG9ydCB7IHNhdmVDbGlja1BvaW50IH0gZnJvbSAnLi9zYXZlQ2xpY2tQb2ludCc7XG5pbXBvcnQgeyBwYWludEJ1Y2tldEFsbFBpeGVscyB9IGZyb20gJy4vcGFpbnRCdWNrZXRBbGxQaXhlbHMnO1xuaW1wb3J0IHsgY3JlYXRlQXJyQ29sb3JzIH0gZnJvbSAnLi9jcmVhdGVBcnJDb2xvcnMnO1xuaW1wb3J0IHsgbW92ZVRvb2xNb3ZlIH0gZnJvbSAnLi9tb3ZlVG9vbE1vdmUnO1xuaW1wb3J0IHsgbW92ZVJlY3RhbmdsZSB9IGZyb20gJy4vbW92ZVJlY3RhbmdsZSc7XG5pbXBvcnQgeyBtb3ZlQ2lyY2xlIH0gZnJvbSAnLi9tb3ZlQ2lyY2xlJztcbmltcG9ydCB7IG1vdmVEaXRoZXJpbmcgfSBmcm9tICcuL21vdmVEaXRoZXJpbmcnO1xuaW1wb3J0IHsgbW92ZWxpZ2h0ZW4gfSBmcm9tICcuL21vdmVsaWdodGVuJztcbmltcG9ydCB7IHJnYjJoZXggfSBmcm9tICcuL3NpbXBsZUZ1bmN0aW9ucy9yZ2IyaGV4JztcbmltcG9ydCB7IHVwZGF0ZUltZyB9IGZyb20gJy4vc2ltcGxlRnVuY3Rpb25zL3VwZGF0ZUltZyc7XG5cblxuZnVuY3Rpb24gY3JlYXRlTWFpbkNhbnZhc0V2ZW50TGlzdGVuZXIob2JqRGF0YSkge1xuICAgIG9iakRhdGEuY2FudmFzTWFpbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IG9iakRhdGEuY2FudmFzTWFpbi5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjb25zdCBib2R5VGFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gICAgICAgIGlmIChvYmpEYXRhLnNlbGVjdGVkVG9vbCA9PT0gT2JqVG9vbHMucGVuKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEucHJpbWFyeUNvbG9yO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEuc2Vjb25kYXJ5Q29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb3ZlUGVuKG9iakRhdGEsIGV2ZW50KTtcblxuICAgICAgICAgICAgbGV0IG1vdmVQZW5GdW47XG4gICAgICAgICAgICBsZXQgcGVuT3V0T2ZDYW52YXNGdW47XG4gICAgICAgICAgICBsZXQgbW91c2V1cE91dE9mQ2FudmFzRnVuO1xuICAgICAgICAgICAgb2JqRGF0YS5jYW52YXNNYWluLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVQZW5GdW4gPSAoZSkgPT4geyBtb3ZlUGVuKG9iakRhdGEsIGUpOyB9KTtcbiAgICAgICAgICAgIG9iakRhdGEuY2FudmFzTWFpbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHBlbk91dE9mQ2FudmFzRnVuID0gKCkgPT4geyBwZW5PdXRPZkNhbnZhcyhvYmpEYXRhKTsgfSk7XG4gICAgICAgICAgICBib2R5VGFnLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZXVwT3V0T2ZDYW52YXNGdW4gPSAoKSA9PiB7IG1vdXNldXBPdXRPZkNhbnZhcyhvYmpEYXRhLCBtb3ZlUGVuRnVuLCBwZW5PdXRPZkNhbnZhc0Z1biwgbW91c2V1cE91dE9mQ2FudmFzRnVuKTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLmVyYXNlcikge1xuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSAnIzAwMDAwMCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJyMwMDAwMDAnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW92ZVBlbihvYmpEYXRhLCBldmVudCk7XG5cbiAgICAgICAgICAgIGxldCBtb3ZlUGVuRnVuO1xuICAgICAgICAgICAgbGV0IHBlbk91dE9mQ2FudmFzRnVuO1xuICAgICAgICAgICAgbGV0IG1vdXNldXBPdXRPZkNhbnZhc0Z1bjtcbiAgICAgICAgICAgIG9iakRhdGEuY2FudmFzTWFpbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlUGVuRnVuID0gKGUpID0+IHsgbW92ZVBlbihvYmpEYXRhLCBlKTsgfSk7XG4gICAgICAgICAgICBvYmpEYXRhLmNhbnZhc01haW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBwZW5PdXRPZkNhbnZhc0Z1biA9ICgpID0+IHsgcGVuT3V0T2ZDYW52YXMob2JqRGF0YSk7IH0pO1xuICAgICAgICAgICAgYm9keVRhZy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2V1cE91dE9mQ2FudmFzRnVuID0gKCkgPT4geyBtb3VzZXVwT3V0T2ZDYW52YXMob2JqRGF0YSwgbW92ZVBlbkZ1biwgcGVuT3V0T2ZDYW52YXNGdW4sIG1vdXNldXBPdXRPZkNhbnZhc0Z1bik7IH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAob2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLm1pcnJvclBlbikge1xuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBvYmpEYXRhLnByaW1hcnlDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBvYmpEYXRhLnNlY29uZGFyeUNvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW92ZU1pcnJvclBlbihvYmpEYXRhLCBldmVudCk7XG5cbiAgICAgICAgICAgIGxldCBtb3ZlTWlycm9yUGVuRnVuO1xuICAgICAgICAgICAgbGV0IHBlbk91dE9mQ2FudmFzRnVuO1xuICAgICAgICAgICAgbGV0IG1vdXNldXBPdXRPZkNhbnZhc0Z1bjtcbiAgICAgICAgICAgIG9iakRhdGEuY2FudmFzTWFpbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlTWlycm9yUGVuRnVuID0gKGUpID0+IHsgbW92ZU1pcnJvclBlbihvYmpEYXRhLCBlKTsgfSk7XG4gICAgICAgICAgICBvYmpEYXRhLmNhbnZhc01haW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBwZW5PdXRPZkNhbnZhc0Z1biA9ICgpID0+IHsgcGVuT3V0T2ZDYW52YXMob2JqRGF0YSk7IH0pO1xuICAgICAgICAgICAgYm9keVRhZy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2V1cE91dE9mQ2FudmFzRnVuID0gKCkgPT4geyBtb3VzZXVwT3V0T2ZDYW52YXMob2JqRGF0YSwgbW92ZU1pcnJvclBlbkZ1biwgcGVuT3V0T2ZDYW52YXNGdW4sIG1vdXNldXBPdXRPZkNhbnZhc0Z1bik7IH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAob2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLnN0cm9rZSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBvYmpEYXRhLnByaW1hcnlDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBvYmpEYXRhLnNlY29uZGFyeUNvbG9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzYXZlQ2xpY2tQb2ludChvYmpEYXRhLnBvaW50Q2xpY2ssIG9iakRhdGEpO1xuICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdChvYmpEYXRhLnBvaW50Q2xpY2sueCAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksXG4gICAgICAgICAgICAgICAgb2JqRGF0YS5wb2ludENsaWNrLnkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICAgICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lLFxuICAgICAgICAgICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcblxuICAgICAgICAgICAgb2JqRGF0YS5NYWluQ2FudmFzQ29weUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgb2JqRGF0YS5NYWluQ2FudmFzQ29weUltZy5zcmMgPSBvYmpEYXRhLmNhbnZhc01haW4udG9EYXRhVVJMKCk7XG5cbiAgICAgICAgICAgIGxldCBtb3ZlU3Ryb2tlRnVuO1xuICAgICAgICAgICAgbGV0IHBlbk91dE9mQ2FudmFzRnVuO1xuICAgICAgICAgICAgbGV0IG1vdXNldXBPdXRPZkNhbnZhc0Z1bjtcbiAgICAgICAgICAgIG9iakRhdGEuY2FudmFzTWFpbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlU3Ryb2tlRnVuID0gKGUpID0+IHsgbW92ZVN0cm9rZShvYmpEYXRhLCBlKTsgfSk7XG4gICAgICAgICAgICBvYmpEYXRhLmNhbnZhc01haW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBwZW5PdXRPZkNhbnZhc0Z1biA9ICgpID0+IHsgcGVuT3V0T2ZDYW52YXMob2JqRGF0YSk7IH0pO1xuICAgICAgICAgICAgYm9keVRhZy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2V1cE91dE9mQ2FudmFzRnVuID0gKCkgPT4geyBtb3VzZXVwT3V0T2ZDYW52YXMob2JqRGF0YSwgbW92ZVN0cm9rZUZ1biwgcGVuT3V0T2ZDYW52YXNGdW4sIG1vdXNldXBPdXRPZkNhbnZhc0Z1bik7IH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAob2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLnBhaW50QnVja2V0KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEucHJpbWFyeUNvbG9yO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEuc2Vjb25kYXJ5Q29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYWludEJ1Y2tldChvYmpEYXRhLCBldmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLnBhaW50QWxsUGl4ZWxzKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEucHJpbWFyeUNvbG9yO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEuc2Vjb25kYXJ5Q29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYWludEJ1Y2tldEFsbFBpeGVscyhvYmpEYXRhLCBldmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLm1vdmUpIHtcbiAgICAgICAgICAgIHNhdmVDbGlja1BvaW50KG9iakRhdGEucG9pbnRDbGljaywgb2JqRGF0YSk7XG4gICAgICAgICAgICBvYmpEYXRhLmFyckNvbG9ycyA9IGNyZWF0ZUFyckNvbG9ycyhvYmpEYXRhLmNhbnZhc01haW4sIG9iakRhdGEpO1xuXG4gICAgICAgICAgICBsZXQgbW92ZVRvb2xNb3ZlRnVuO1xuICAgICAgICAgICAgbGV0IHBlbk91dE9mQ2FudmFzRnVuO1xuICAgICAgICAgICAgbGV0IG1vdXNldXBPdXRPZkNhbnZhc0Z1bjtcbiAgICAgICAgICAgIG9iakRhdGEuY2FudmFzTWFpbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlVG9vbE1vdmVGdW4gPSAoZSkgPT4geyBtb3ZlVG9vbE1vdmUob2JqRGF0YSwgZSk7IH0pO1xuICAgICAgICAgICAgb2JqRGF0YS5jYW52YXNNYWluLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgcGVuT3V0T2ZDYW52YXNGdW4gPSAoKSA9PiB7IHBlbk91dE9mQ2FudmFzKG9iakRhdGEpOyB9KTtcbiAgICAgICAgICAgIGJvZHlUYWcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNldXBPdXRPZkNhbnZhc0Z1biA9ICgpID0+IHsgbW91c2V1cE91dE9mQ2FudmFzKG9iakRhdGEsIG1vdmVUb29sTW92ZUZ1biwgcGVuT3V0T2ZDYW52YXNGdW4sIG1vdXNldXBPdXRPZkNhbnZhc0Z1bik7IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9iakRhdGEuc2VsZWN0ZWRUb29sID09PSBPYmpUb29scy5yZWN0YW5nbGUpIHtcbiAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gb2JqRGF0YS5wcmltYXJ5Q29sb3I7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gb2JqRGF0YS5zZWNvbmRhcnlDb2xvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2F2ZUNsaWNrUG9pbnQob2JqRGF0YS5wb2ludENsaWNrLCBvYmpEYXRhKTtcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3Qob2JqRGF0YS5wb2ludENsaWNrLnggKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLFxuICAgICAgICAgICAgICAgIG9iakRhdGEucG9pbnRDbGljay55ICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSxcbiAgICAgICAgICAgICAgICBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSxcbiAgICAgICAgICAgICAgICBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG5cbiAgICAgICAgICAgIG9iakRhdGEuTWFpbkNhbnZhc0NvcHlJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgIG9iakRhdGEuTWFpbkNhbnZhc0NvcHlJbWcuc3JjID0gb2JqRGF0YS5jYW52YXNNYWluLnRvRGF0YVVSTCgpO1xuXG4gICAgICAgICAgICBsZXQgbW92ZVJlY3RhbmdsZUZ1bjtcbiAgICAgICAgICAgIGxldCBwZW5PdXRPZkNhbnZhc0Z1bjtcbiAgICAgICAgICAgIGxldCBtb3VzZXVwT3V0T2ZDYW52YXNGdW47XG4gICAgICAgICAgICBvYmpEYXRhLmNhbnZhc01haW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZVJlY3RhbmdsZUZ1biA9IChlKSA9PiB7IG1vdmVSZWN0YW5nbGUob2JqRGF0YSwgZSk7IH0pO1xuICAgICAgICAgICAgb2JqRGF0YS5jYW52YXNNYWluLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgcGVuT3V0T2ZDYW52YXNGdW4gPSAoKSA9PiB7IHBlbk91dE9mQ2FudmFzKG9iakRhdGEpOyB9KTtcbiAgICAgICAgICAgIGJvZHlUYWcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNldXBPdXRPZkNhbnZhc0Z1biA9ICgpID0+IHsgbW91c2V1cE91dE9mQ2FudmFzKG9iakRhdGEsIG1vdmVSZWN0YW5nbGVGdW4sIHBlbk91dE9mQ2FudmFzRnVuLCBtb3VzZXVwT3V0T2ZDYW52YXNGdW4pOyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvYmpEYXRhLnNlbGVjdGVkVG9vbCA9PT0gT2JqVG9vbHMuY2lyY2xlKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEucHJpbWFyeUNvbG9yO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9iakRhdGEuc2Vjb25kYXJ5Q29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzYXZlQ2xpY2tQb2ludChvYmpEYXRhLnBvaW50Q2xpY2ssIG9iakRhdGEpO1xuICAgICAgICAgICAgb2JqRGF0YS5NYWluQ2FudmFzQ29weUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgb2JqRGF0YS5NYWluQ2FudmFzQ29weUltZy5zcmMgPSBvYmpEYXRhLmNhbnZhc01haW4udG9EYXRhVVJMKCk7XG5cbiAgICAgICAgICAgIGxldCBtb3ZlQ2lyY2xlRnVuO1xuICAgICAgICAgICAgbGV0IHBlbk91dE9mQ2FudmFzRnVuO1xuICAgICAgICAgICAgbGV0IG1vdXNldXBPdXRPZkNhbnZhc0Z1bjtcbiAgICAgICAgICAgIG9iakRhdGEuY2FudmFzTWFpbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlQ2lyY2xlRnVuID0gKGUpID0+IHsgbW92ZUNpcmNsZShvYmpEYXRhLCBlKTsgfSk7XG4gICAgICAgICAgICBvYmpEYXRhLmNhbnZhc01haW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBwZW5PdXRPZkNhbnZhc0Z1biA9ICgpID0+IHsgcGVuT3V0T2ZDYW52YXMob2JqRGF0YSk7IH0pO1xuICAgICAgICAgICAgYm9keVRhZy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2V1cE91dE9mQ2FudmFzRnVuID0gKCkgPT4geyBtb3VzZXVwT3V0T2ZDYW52YXMob2JqRGF0YSwgbW92ZUNpcmNsZUZ1biwgcGVuT3V0T2ZDYW52YXNGdW4sIG1vdXNldXBPdXRPZkNhbnZhc0Z1bik7IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9iakRhdGEuc2VsZWN0ZWRUb29sID09PSBPYmpUb29scy5kaXRoZXJpbmcpIHtcbiAgICAgICAgICAgIG1vdmVEaXRoZXJpbmcob2JqRGF0YSwgZXZlbnQpO1xuXG4gICAgICAgICAgICBsZXQgbW92ZURpdGhlcmluZ0Z1bjtcbiAgICAgICAgICAgIGxldCBwZW5PdXRPZkNhbnZhc0Z1bjtcbiAgICAgICAgICAgIGxldCBtb3VzZXVwT3V0T2ZDYW52YXNGdW47XG4gICAgICAgICAgICBvYmpEYXRhLmNhbnZhc01haW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZURpdGhlcmluZ0Z1biA9IChlKSA9PiB7IG1vdmVEaXRoZXJpbmcob2JqRGF0YSwgZSk7IH0pO1xuICAgICAgICAgICAgb2JqRGF0YS5jYW52YXNNYWluLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgcGVuT3V0T2ZDYW52YXNGdW4gPSAoKSA9PiB7IHBlbk91dE9mQ2FudmFzKG9iakRhdGEpOyB9KTtcbiAgICAgICAgICAgIGJvZHlUYWcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNldXBPdXRPZkNhbnZhc0Z1biA9ICgpID0+IHsgbW91c2V1cE91dE9mQ2FudmFzKG9iakRhdGEsIG1vdmVEaXRoZXJpbmdGdW4sIHBlbk91dE9mQ2FudmFzRnVuLCBtb3VzZXVwT3V0T2ZDYW52YXNGdW4pOyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvYmpEYXRhLnNlbGVjdGVkVG9vbCA9PT0gT2JqVG9vbHMubGlnaHRlbikge1xuICAgICAgICAgICAgbW92ZWxpZ2h0ZW4ob2JqRGF0YSwgZXZlbnQpO1xuXG4gICAgICAgICAgICBsZXQgbW92ZWxpZ2h0ZW5GdW47XG4gICAgICAgICAgICBsZXQgcGVuT3V0T2ZDYW52YXNGdW47XG4gICAgICAgICAgICBsZXQgbW91c2V1cE91dE9mQ2FudmFzRnVuO1xuICAgICAgICAgICAgb2JqRGF0YS5jYW52YXNNYWluLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVsaWdodGVuRnVuID0gKGUpID0+IHsgbW92ZWxpZ2h0ZW4ob2JqRGF0YSwgZSk7IH0pO1xuICAgICAgICAgICAgb2JqRGF0YS5jYW52YXNNYWluLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgcGVuT3V0T2ZDYW52YXNGdW4gPSAoKSA9PiB7IHBlbk91dE9mQ2FudmFzKG9iakRhdGEpOyB9KTtcbiAgICAgICAgICAgIGJvZHlUYWcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNldXBPdXRPZkNhbnZhc0Z1biA9ICgpID0+IHsgbW91c2V1cE91dE9mQ2FudmFzKG9iakRhdGEsIG1vdmVsaWdodGVuRnVuLCBwZW5PdXRPZkNhbnZhc0Z1biwgbW91c2V1cE91dE9mQ2FudmFzRnVuKTsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2JqRGF0YS5zZWxlY3RlZFRvb2wgPT09IE9ialRvb2xzLmNvbG9yUGlja2VyKSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvckNlbGwgPSBjb250ZXh0LmdldEltYWdlRGF0YShldmVudC5wYWdlWCAtIG9iakRhdGEuY29vcmRzLmxlZnQsXG4gICAgICAgICAgICAgICAgZXZlbnQucGFnZVkgLSBvYmpEYXRhLmNvb3Jkcy50b3AsIDEsIDEpLmRhdGE7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbG9yQ2VsbEhleCA9IHJnYjJoZXgoLi4uY29sb3JDZWxsKTtcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3JDZWxsSGV4O1xuXG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBvYmpEYXRhLnByaW1hcnlDb2xvciA9IGNvbG9yQ2VsbEhleDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXItZmlyc3QnKTtcblxuICAgICAgICAgICAgICAgIGVsLnZhbHVlID0gY29sb3JDZWxsSGV4O1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoZXZlbnQud2hpY2ggPT09IDMpKSB7XG4gICAgICAgICAgICAgICAgb2JqRGF0YS5zZWNvbmRhcnlDb2xvciA9IGNvbG9yQ2VsbEhleDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXItc2Vjb25kJyk7XG4gICAgICAgICAgICAgICAgZWwudmFsdWUgPSBjb2xvckNlbGxIZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlSW1nKG9iakRhdGEuY2FudmFzTWFpbik7XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZU1haW5DYW52YXNFdmVudExpc3RlbmVyIH07XG4iLCJcblxuZnVuY3Rpb24gbW92ZVN0cm9rZShvYmpEYXRhLCBldmVudCkge1xuICAgIC8vIEZST00gU0FWRUQgSU1HIEdPIFRPIFRIRSBDQU5WQVNcbiAgICAvLyBjbGVhciBjYW52YXNcbiAgICBjb25zdCBjdHggPSBvYmpEYXRhLmNhbnZhc01haW4uZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIG9iakRhdGEuY2FudmFzTWFpbi53aWR0aCwgb2JqRGF0YS5jYW52YXNNYWluLmhlaWdodCk7XG5cbiAgICBjdHguZHJhd0ltYWdlKG9iakRhdGEuTWFpbkNhbnZhc0NvcHlJbWcsIDAsIDAsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzLFxuICAgICAgICBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyk7XG4gICAgY29uc3QgbnVtSiA9IE1hdGguZmxvb3IoKGV2ZW50LnBhZ2VYIC0gb2JqRGF0YS5jb29yZHMubGVmdClcbiAgICAgICAgLyAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpKTtcbiAgICBjb25zdCBudW1JID0gTWF0aC5mbG9vcigoZXZlbnQucGFnZVkgLSBvYmpEYXRhLmNvb3Jkcy50b3ApXG4gICAgICAgIC8gKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSk7XG5cbiAgICBvYmpEYXRhLmNvbnRleHQuZmlsbFJlY3QobnVtSiAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSksIG51bUlcbiAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuXG4gICAgY29uc3QgeERlbCA9IG51bUogLSBvYmpEYXRhLnBvaW50Q2xpY2sueDtcbiAgICBjb25zdCB5RGVsID0gbnVtSSAtIG9iakRhdGEucG9pbnRDbGljay55O1xuICAgIGxldCBtYXg7XG4gICAgbGV0IG1pbjtcblxuICAgIGlmIChNYXRoLmFicyh4RGVsKSA+IE1hdGguYWJzKHlEZWwpKSB7XG4gICAgICAgIG1heCA9IHhEZWw7XG4gICAgICAgIG1pbiA9IHlEZWw7XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IG1heCAvIE1hdGguYWJzKG1heCk7IE1hdGguYWJzKGopIDwgTWF0aC5hYnMobWF4KTsgaiArPSBtYXggLyBNYXRoLmFicyhtYXgpKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gTWF0aC5yb3VuZChtaW4gKiAoTWF0aC5hYnMoaikgLyBNYXRoLmFicyhtYXgpKSk7XG5cbiAgICAgICAgICAgIG9iakRhdGEuY29udGV4dC5maWxsUmVjdCgob2JqRGF0YS5wb2ludENsaWNrLnggKyBqKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKG9iakRhdGEucG9pbnRDbGljay55ICsgaSkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSksIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIG1heCA9IHlEZWw7XG4gICAgICAgIG1pbiA9IHhEZWw7XG4gICAgICAgIGZvciAobGV0IGkgPSBtYXggLyBNYXRoLmFicyhtYXgpOyBNYXRoLmFicyhpKSA8IE1hdGguYWJzKG1heCk7IGkgKz0gbWF4IC8gTWF0aC5hYnMobWF4KSkge1xuICAgICAgICAgICAgY29uc3QgaiA9IE1hdGgucm91bmQobWluICogKE1hdGguYWJzKGkpIC8gTWF0aC5hYnMobWF4KSkpO1xuICAgICAgICAgICAgb2JqRGF0YS5jb250ZXh0LmZpbGxSZWN0KChvYmpEYXRhLnBvaW50Q2xpY2sueCArIGopICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzXG4gICAgICAgICAgICAgICAgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAob2JqRGF0YS5wb2ludENsaWNrLnkgKyBpKSAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBtb3ZlU3Ryb2tlIH07XG4iLCJpbXBvcnQgeyBtYXRjaFN0YXJ0Q29sb3IgfSBmcm9tICcuL21hdGNoU3RhcnRDb2xvcic7XG5pbXBvcnQgeyBjb2xvclBpeGVsIH0gZnJvbSAnLi9jb2xvclBpeGVsJztcblxuZnVuY3Rpb24gcGFpbnRCdWNrZXQob2JqRGF0YSwgZXZlbnQpIHtcbiAgICBjb25zdCBudW1KID0gTWF0aC5mbG9vcigoZXZlbnQucGFnZVggLSBvYmpEYXRhLmNvb3Jkcy5sZWZ0KVxuICAgICAgICAvIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSkpO1xuICAgIGNvbnN0IG51bUkgPSBNYXRoLmZsb29yKChldmVudC5wYWdlWSAtIG9iakRhdGEuY29vcmRzLnRvcClcbiAgICAgICAgLyAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpKTtcblxuICAgIGNvbnN0IHBpeGVsU3RhY2sgPSBbW251bUosIG51bUldXTtcbiAgICBjb25zdCBjdHggPSBvYmpEYXRhLmNhbnZhc01haW4uZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjb25zdCBjb2xvckNsaWNrID0gY3R4LmdldEltYWdlRGF0YShldmVudC5wYWdlWCAtIG9iakRhdGEuY29vcmRzLmxlZnQsIGV2ZW50LnBhZ2VZXG4gICAgICAgIC0gb2JqRGF0YS5jb29yZHMudG9wLCAxLCAxKS5kYXRhO1xuXG4gICAgd2hpbGUgKHBpeGVsU3RhY2subGVuZ3RoKSB7XG4gICAgICAgIGxldCByZWFjaExlZnQ7XG4gICAgICAgIGxldCByZWFjaFJpZ2h0O1xuICAgICAgICBjb25zdCBuZXdQb3MgPSBwaXhlbFN0YWNrLnBvcCgpO1xuICAgICAgICBjb25zdCB4ID0gbmV3UG9zWzBdO1xuICAgICAgICBsZXQgeSA9IG5ld1Bvc1sxXTtcblxuICAgICAgICB3aGlsZSAoeSA+PSAwICYmIG1hdGNoU3RhcnRDb2xvcih4LCB5LCBjb2xvckNsaWNrLCBvYmpEYXRhKSkge1xuICAgICAgICAgICAgeSAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHkgKz0gMTtcbiAgICAgICAgcmVhY2hMZWZ0ID0gZmFsc2U7XG4gICAgICAgIHJlYWNoUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgd2hpbGUgKHkgPCBvYmpEYXRhLndpZHRoRnJhbWUgJiYgbWF0Y2hTdGFydENvbG9yKHgsIHksIGNvbG9yQ2xpY2ssIG9iakRhdGEpKSB7XG4gICAgICAgICAgICBjb2xvclBpeGVsKHgsIHksIG9iakRhdGEpO1xuICAgICAgICAgICAgaWYgKHggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoU3RhcnRDb2xvcih4IC0gMSwgeSwgY29sb3JDbGljaywgb2JqRGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWFjaExlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpeGVsU3RhY2sucHVzaChbeCAtIDEsIHldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWNoTGVmdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlYWNoTGVmdCkge1xuICAgICAgICAgICAgICAgICAgICByZWFjaExlZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeCA8IG9iakRhdGEud2lkdGhGcmFtZSAtIDEpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hTdGFydENvbG9yKHggKyAxLCB5LCBjb2xvckNsaWNrLCBvYmpEYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlYWNoUmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpeGVsU3RhY2sucHVzaChbeCArIDEsIHldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWNoUmlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWFjaFJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWNoUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5ICs9IDE7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IHBhaW50QnVja2V0IH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuaW1wb3J0IHsgbWF0Y2hTdGFydENvbG9yIH0gZnJvbSAnLi9tYXRjaFN0YXJ0Q29sb3InO1xuaW1wb3J0IHsgY29sb3JQaXhlbCB9IGZyb20gJy4vY29sb3JQaXhlbCc7XG5cbmZ1bmN0aW9uIHBhaW50QnVja2V0QWxsUGl4ZWxzKG9iakRhdGEsIGV2ZW50KSB7XG4gICAgY29uc3QgY3R4ID0gb2JqRGF0YS5jYW52YXNNYWluLmdldENvbnRleHQoJzJkJyk7XG4gICAgY29uc3QgY29sb3JDbGljayA9IGN0eC5nZXRJbWFnZURhdGEoZXZlbnQucGFnZVggLSBvYmpEYXRhLmNvb3Jkcy5sZWZ0LCBldmVudC5wYWdlWVxuICAgICAgICAtIG9iakRhdGEuY29vcmRzLnRvcCwgMSwgMSkuZGF0YTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqRGF0YS53aWR0aEZyYW1lOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBvYmpEYXRhLndpZHRoRnJhbWU7IGorKykge1xuICAgICAgICAgICAgaWYgKG1hdGNoU3RhcnRDb2xvcihqLCBpLCBjb2xvckNsaWNrLCBvYmpEYXRhKSkge1xuICAgICAgICAgICAgICAgIGNvbG9yUGl4ZWwoaiwgaSwgb2JqRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7cGFpbnRCdWNrZXRBbGxQaXhlbHN9O1xuIiwiaW1wb3J0IHsgcmdiMmhleCB9IGZyb20gJy4vc2ltcGxlRnVuY3Rpb25zL3JnYjJoZXgnO1xuXG5mdW5jdGlvbiBjcmVhdGVBcnJDb2xvcnMoY2FudmFzQ29weSwgb2JqRGF0YSkge1xuICAgIGNvbnN0IGFyckNvbG9ycyA9IFtdO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wbHVzcGx1c1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqRGF0YS53aWR0aEZyYW1lOyBpKyspIHtcbiAgICAgICAgYXJyQ29sb3JzW2ldID0gW107XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wbHVzcGx1c1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG9iakRhdGEud2lkdGhGcmFtZTsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBjdHhDb3B5ID0gY2FudmFzQ29weS5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgY29uc3QgY29sb3JDZWxsID0gY3R4Q29weS5nZXRJbWFnZURhdGEoaiAqIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lKSxcbiAgICAgICAgICAgIGkgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAxLCAxKS5kYXRhO1xuXG4gICAgICAgICAgICBhcnJDb2xvcnNbaV1bal0gPSByZ2IyaGV4KC4uLmNvbG9yQ2VsbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyckNvbG9ycztcbn1cblxuZXhwb3J0IHsgY3JlYXRlQXJyQ29sb3JzIH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuXG5cbmZ1bmN0aW9uIG1vdmVSZWN0YW5nbGUob2JqRGF0YSwgZXZlbnQpIHtcbiAgICBjb25zdCBudW1KID0gTWF0aC5mbG9vcigoZXZlbnQucGFnZVggLSBvYmpEYXRhLmNvb3Jkcy5sZWZ0KVxuICAgICAgICAvIChvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSkpO1xuICAgIGNvbnN0IG51bUkgPSBNYXRoLmZsb29yKChldmVudC5wYWdlWSAtIG9iakRhdGEuY29vcmRzLnRvcClcbiAgICAgICAgLyAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpKTtcblxuICAgIGNvbnN0IHhEZWwgPSBudW1KIC0gb2JqRGF0YS5wb2ludENsaWNrLng7XG4gICAgY29uc3QgeURlbCA9IG51bUkgLSBvYmpEYXRhLnBvaW50Q2xpY2sueTtcblxuICAgIGlmICgob2JqRGF0YS5wb2ludENsaWNrLnhQcmV2ICE9PSB4RGVsKSB8fCAob2JqRGF0YS5wb2ludENsaWNrLnlQcmV2ICE9PSB5RGVsKSkge1xuICAgICAgICBvYmpEYXRhLnBvaW50Q2xpY2sueFByZXYgPSB4RGVsO1xuICAgICAgICBvYmpEYXRhLnBvaW50Q2xpY2sueVByZXYgPSB5RGVsO1xuXG4gICAgICAgIGNvbnN0IGN0eCA9IG9iakRhdGEuY2FudmFzTWFpbi5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIG9iakRhdGEuY2FudmFzTWFpbi53aWR0aCwgb2JqRGF0YS5jYW52YXNNYWluLmhlaWdodCk7XG5cbiAgICAgICAgY3R4LmRyYXdJbWFnZShvYmpEYXRhLk1haW5DYW52YXNDb3B5SW1nLCAwLCAwLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyxcbiAgICAgICAgICAgIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzKTtcblxuICAgICAgICBsZXQgeFN0YXJ0O1xuICAgICAgICBsZXQgeEVuZDtcbiAgICAgICAgbGV0IHlTdGFydDtcbiAgICAgICAgbGV0IHlFbmQ7XG4gICAgICAgIGlmIChudW1KID4gb2JqRGF0YS5wb2ludENsaWNrLngpIHtcbiAgICAgICAgICAgIHhTdGFydCA9IG9iakRhdGEucG9pbnRDbGljay54O1xuICAgICAgICAgICAgeEVuZCA9IG51bUo7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4U3RhcnQgPSBudW1KO1xuICAgICAgICAgICAgeEVuZCA9IG9iakRhdGEucG9pbnRDbGljay54O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51bUkgPiBvYmpEYXRhLnBvaW50Q2xpY2sueSkge1xuICAgICAgICAgICAgeVN0YXJ0ID0gb2JqRGF0YS5wb2ludENsaWNrLnk7XG4gICAgICAgICAgICB5RW5kID0gbnVtSTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHlTdGFydCA9IG51bUk7XG4gICAgICAgICAgICB5RW5kID0gb2JqRGF0YS5wb2ludENsaWNrLnk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0geVN0YXJ0OyBpIDw9IHlFbmQ7IGkrKykge1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KCh4U3RhcnQpICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKGkpXG4gICAgICAgICAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoKHhFbmQpICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKGkpXG4gICAgICAgICAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaiA9IHhTdGFydDsgaiA8PSB4RW5kOyBqKyspIHtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgoaikgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCAoeVN0YXJ0KVxuICAgICAgICAgICAgICAgICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXNcbiAgICAgICAgICAgICAgICAvIG9iakRhdGEud2lkdGhGcmFtZSwgb2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpO1xuXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoKGopICogKG9iakRhdGEucmVhbFdpZHRoQ2FudmFzIC8gb2JqRGF0YS53aWR0aEZyYW1lKSwgKHlFbmQpXG4gICAgICAgICAgICAgICAgKiAob2JqRGF0YS5yZWFsV2lkdGhDYW52YXMgLyBvYmpEYXRhLndpZHRoRnJhbWUpLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhc1xuICAgICAgICAgICAgICAgIC8gb2JqRGF0YS53aWR0aEZyYW1lLCBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAvIG9iakRhdGEud2lkdGhGcmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7bW92ZVJlY3RhbmdsZX07XG4iLCJpbXBvcnQge2RyYXdGcm9tQ2FudmFzfSBmcm9tICcuL2RyYXdGcm9tQ2FudmFzJztcblxuZnVuY3Rpb24gY3JlYXRlSW50ZXJ2YWwob2JqRGF0YSkge1xuICAgIGNsZWFySW50ZXJ2YWwob2JqRGF0YS5pbnRlcnZhbCk7XG4gICAgb2JqRGF0YS5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgY29uc3QgZnJhbWUgPSBvYmpEYXRhLmFyckZyYW1lc1tvYmpEYXRhLmNvdW50RnJhbWVzICUgb2JqRGF0YS5hcnJGcmFtZXMubGVuZ3RoXTtcbiAgICAgICAgZHJhd0Zyb21DYW52YXMoZnJhbWUpO1xuICAgICAgICBvYmpEYXRhLmNvdW50RnJhbWVzICs9IDE7XG4gICAgfSwgMTAwMCAvIG9iakRhdGEubnVtRlBTKTtcbn1cblxuZXhwb3J0IHtjcmVhdGVJbnRlcnZhbH07XG4iLCJpbXBvcnQgeyB0b2dnbGVTZWxlY3RlZCB9IGZyb20gJy4vdG9nZ2xlU2VsZWN0ZWQnO1xuaW1wb3J0IHsgY3JlYXRlTmV3RnJhbWUgfSBmcm9tICcuL2NyZWF0ZU5ld0ZyYW1lJztcblxuZnVuY3Rpb24gZXZlbnRMaXN0ZW5lckZyYW1lcyhvYmpEYXRhKSB7XG4gICAgb2JqRGF0YS5hcnJGcmFtZXMucHVzaChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW1nLXdyYXAnKSk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZyYW1lJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNyZWF0ZU5ld0ZyYW1lKG9iakRhdGEpO1xuICAgIH0pO1xuXG4gICAgLy8gZXZlbnRsaXN0ZW5lciB0byB0b2dnbGUgZnJhbWVzXG4gICAgY29uc3QgaW1nc1NlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmltZy1mcmFtZS1sZWZ0Jyk7XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaW1nc1NlbGVjdGVkLmxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICBjb25zdCBidXR0b24gPSBpbWdzU2VsZWN0ZWRbaW5kZXhdO1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTZWxlY3RlZChidXR0b24sIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzKSk7XG4gICAgfVxuXG4gICAgY29uc3QgZnJhbWVXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmltZy13cmFwJyk7XG4gICAgY29uc3QgbmV3SW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmltZy1mcmFtZS1sZWZ0Jyk7XG5cbiAgICBjb25zdCBidXR0b25EZWxldGVGcmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtZnJhbWUnKTtcbiAgICBidXR0b25EZWxldGVGcmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgLy8gaWYgZGVsZXRlIGxhc3QgZnJhbWUgLSBnZXQgZXJyb3JcbiAgICAgICAgaWYgKG9iakRhdGEuYXJyRnJhbWVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgYWxlcnQoJ2NhbiBub3QgZGVsZXRlIGxhc3QgZnJhbWUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdJbWcuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWctZnJhbWUtbGVmdCcpO1xuICAgICAgICAgICAgdG9nZ2xlU2VsZWN0ZWQoZmlyc3RJbWcsIG9iakRhdGEucmVhbFdpZHRoQ2FudmFzKSgpO1xuICAgICAgICB9XG4gICAgICAgIGZyYW1lV3JhcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGZyYW1lV3JhcCk7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSBvYmpEYXRhLmFyckZyYW1lcy5pbmRleE9mKGZyYW1lV3JhcCk7XG4gICAgICAgIG9iakRhdGEuYXJyRnJhbWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBidXR0b25Db3B5RnJhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29weS1mcmFtZScpO1xuICAgIGJ1dHRvbkNvcHlGcmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY3JlYXRlTmV3RnJhbWUob2JqRGF0YSwgZnJhbWVXcmFwKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IHsgZXZlbnRMaXN0ZW5lckZyYW1lcyB9O1xuIiwiaW1wb3J0IHsgc2VsZWN0VGhpc1Rvb2wgfSBmcm9tICcuL3NlbGVjdFRoaXNUb29sJztcbmltcG9ydCB7IGdldFRvb2x0aXBUZXh0IH0gZnJvbSAnLi9nZXRUb29sdGlwVGV4dCc7XG5pbXBvcnQgeyBjb2xvclBpY2tlciB9IGZyb20gJy4vY29sb3JQaWNrZXInO1xuXG5mdW5jdGlvbiBjcmVhdGVUb29sc0xpc3RlbmVyKG9iakRhdGEpIHtcbiAgICBjb2xvclBpY2tlcihvYmpEYXRhKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b29scy1ibG9jaycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b29sLWljb24nKSkge1xuICAgICAgICAgICAgY29uc3QgdG9vbEljb24gPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICBzZWxlY3RUaGlzVG9vbCh0b29sSWNvbiwgb2JqRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygndG9vbC1pY29uJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xJY29uID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgICAgICBzZWxlY3RUaGlzVG9vbCh0b29sSWNvbiwgb2JqRGF0YSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b29scy1ibG9jaycpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIChldmVudCkgPT4ge1xuICAgICAgICBsZXQgdG9vbEVsO1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b29sLWljb24nKSkge1xuICAgICAgICAgICAgdG9vbEVsID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndG9vbC1pY29uJykpIHtcbiAgICAgICAgICAgIHRvb2xFbCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9vbEVsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29sVGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0b29sVGlwLmlkID0gJ3Rvb2xUaXAnO1xuICAgICAgICAgICAgdG9vbFRpcC5pbm5lckhUTUwgPSBnZXRUb29sdGlwVGV4dCh0b29sRWwucXVlcnlTZWxlY3RvcigncCcpLmlubmVySFRNTCk7XG4gICAgICAgICAgICB0b29sVGlwLmNsYXNzTGlzdC5hZGQoJ3Rvb2x0aXAtY2xhc3MnKTtcbiAgICAgICAgICAgIHRvb2xFbC5hcHBlbmRDaGlsZCh0b29sVGlwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvb2xzLWJsb2NrJykuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRvb2xFbDtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygndG9vbC1pY29uJykpIHtcbiAgICAgICAgICAgIHRvb2xFbCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rvb2wtaWNvbicpKSB7XG4gICAgICAgICAgICB0b29sRWwgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvb2xFbCkge1xuICAgICAgICAgICAgY29uc3QgdG9vbFRpcEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2xUaXAnKTtcbiAgICAgICAgICAgIHRvb2xUaXBFbC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5leHBvcnQgeyBjcmVhdGVUb29sc0xpc3RlbmVyIH07XG4iLCJcblxuZnVuY3Rpb24gY29sb3JQaWNrZXIob2JqRGF0YSkge1xuICAgIG9iakRhdGEucHJpbWFyeUNvbG9yID0gJyMwMGZmMDAnO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXItZmlyc3QnKS52YWx1ZSA9IG9iakRhdGEucHJpbWFyeUNvbG9yO1xuXG4gICAgb2JqRGF0YS5zZWNvbmRhcnlDb2xvciA9ICcjMDAwMGZmJztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sb3ItcGlja2VyLXNlY29uZCcpLnZhbHVlID0gb2JqRGF0YS5zZWNvbmRhcnlDb2xvcjtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXItZmlyc3QnKS5vbmlucHV0ID0gKCkgPT4ge1xuICAgICAgICBvYmpEYXRhLnByaW1hcnlDb2xvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXItZmlyc3QnKS52YWx1ZTtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlci1zZWNvbmQnKS5vbmlucHV0ID0gKCkgPT4ge1xuICAgICAgICBvYmpEYXRhLnNlY29uZGFyeUNvbG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbG9yLXBpY2tlci1zZWNvbmQnKS52YWx1ZTtcbiAgICB9O1xufVxuXG5leHBvcnQge2NvbG9yUGlja2VyfTtcbiIsIlxuZnVuY3Rpb24gZ2V0VG9vbHRpcFRleHQodmFsdWUpIHtcbiAgICBjb25zdCBvYmpUaXBzID0ge1xuICAgICAgICBwZW46ICdwZW4gdG9vbCcsXG4gICAgICAgICd2ZXJ0aWNhbCBtaXJyb3IgcGVuJzogJ0NUUkwgLSBob3Jpem9udGFsIGF4aXM7IFNISUZUIC0gaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgYXhpeicsXG4gICAgICAgICdwYWludCBidWNrZXQnOiAncGFpbnQgYnVja2V0JyxcbiAgICAgICAgJ3BhaW50IGFsbCBwaXhlbHMgb2YgdGhlIHNhbWUgY29sb3InOiAncGFpbnQgYWxsIHBpeGVscyBvZiB0aGUgc2FtZSBjb2xvcicsXG4gICAgICAgIGVyYXNlcjogJ2VyYXNlcicsXG4gICAgICAgIHN0cm9rZTogJ3N0cm9rZScsXG4gICAgICAgIG1vdmU6ICdtb3ZlJyxcbiAgICAgICAgcmVjdGFuZ2xlOiAncmVjdGFuZ2xlJyxcbiAgICAgICAgY2lyY2xlOiAnY2lyY2xlJyxcbiAgICAgICAgbGlnaHRlbjogJ0NUUkwgLSBkYXJrZW4nLFxuICAgICAgICBkaXRoZXJpbmc6ICdkaXRoZXJpbmcnLFxuICAgICAgICAnY29sb3IgcGlja2VyJzogJ2NvbG9yIHBpY2tlcicsXG4gICAgfTtcbiAgICByZXR1cm4gb2JqVGlwc1t2YWx1ZV07XG59XG5cbmV4cG9ydCB7IGdldFRvb2x0aXBUZXh0IH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuXG5cbmZ1bmN0aW9uIHJlc2l6ZUZyYW1lcyhvYmpEYXRhKSB7XG4gICAgZnVuY3Rpb24gcmVzaXplQWxsSW1ncyhvbGRXaWR0aEZyYW1lKSB7XG4gICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBjYW52YXNcbiAgICAgICAgY29uc3QgbmV3Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRleHQgPSBuZXdDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICAvLyBzZXQgZGltZW5zaW9uc1xuICAgICAgICBuZXdDYW52YXMud2lkdGggPSBvYmpEYXRhLmNhbnZhc01haW4ud2lkdGg7XG4gICAgICAgIG5ld0NhbnZhcy5oZWlnaHQgPSBvYmpEYXRhLmNhbnZhc01haW4uaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IHggPSBvYmpEYXRhLnJlYWxXaWR0aENhbnZhcyAqIChvbGRXaWR0aEZyYW1lIC8gb2JqRGF0YS53aWR0aEZyYW1lKTtcbiAgICAgICAgY29uc3QgaW1hZ2VzTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbWctZnJhbWUtbGVmdCcpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VzTGVmdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGltYWdlc0xlZnRbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gb2JqRGF0YS5jYW52YXNNYWluLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBvYmpEYXRhLmNhbnZhc01haW4ud2lkdGgsIG9iakRhdGEuY2FudmFzTWFpbi5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2VzTGVmdFtpXSwgMCwgMCwgeCwgeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdDb250ZXh0LmRyYXdJbWFnZShpbWFnZXNMZWZ0W2ldLCAwLCAwLCB4LCB4KTtcbiAgICAgICAgICAgIGltYWdlc0xlZnRbaV0uc3JjID0gbmV3Q2FudmFzLnRvRGF0YVVSTCgpO1xuXG4gICAgICAgICAgICBuZXdDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBuZXdDYW52YXMud2lkdGgsIG5ld0NhbnZhcy5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZXNpemUzMicpLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFdpZHRoRnJhbWUgPSBvYmpEYXRhLndpZHRoRnJhbWU7XG4gICAgICAgIG9iakRhdGEud2lkdGhGcmFtZSA9IDMyO1xuICAgICAgICByZXNpemVBbGxJbWdzKG9sZFdpZHRoRnJhbWUpO1xuICAgIH07XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jlc2l6ZTY0Jykub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgb2xkV2lkdGhGcmFtZSA9IG9iakRhdGEud2lkdGhGcmFtZTtcbiAgICAgICAgb2JqRGF0YS53aWR0aEZyYW1lID0gNjQ7XG4gICAgICAgIHJlc2l6ZUFsbEltZ3Mob2xkV2lkdGhGcmFtZSk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzaXplMTI4Jykub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgb2xkV2lkdGhGcmFtZSA9IG9iakRhdGEud2lkdGhGcmFtZTtcbiAgICAgICAgb2JqRGF0YS53aWR0aEZyYW1lID0gMTI4O1xuICAgICAgICByZXNpemVBbGxJbWdzKG9sZFdpZHRoRnJhbWUpO1xuICAgIH07XG59XG5cbmV4cG9ydCB7IHJlc2l6ZUZyYW1lcyB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==